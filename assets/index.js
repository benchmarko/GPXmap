(function(O){"use strict";var ht=document.createElement("style");ht.textContent=`.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:#ffffff80}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:#fffc;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:#fffc;text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}.leaflet-cluster-anim .leaflet-marker-icon,.leaflet-cluster-anim .leaflet-marker-shadow{-webkit-transition:-webkit-transform .3s ease-out,opacity .3s ease-in;-moz-transition:-moz-transform .3s ease-out,opacity .3s ease-in;-o-transition:-o-transform .3s ease-out,opacity .3s ease-in;transition:transform .3s ease-out,opacity .3s ease-in}.leaflet-cluster-spider-leg{-webkit-transition:-webkit-stroke-dashoffset .3s ease-out,-webkit-stroke-opacity .3s ease-in;-moz-transition:-moz-stroke-dashoffset .3s ease-out,-moz-stroke-opacity .3s ease-in;-o-transition:-o-stroke-dashoffset .3s ease-out,-o-stroke-opacity .3s ease-in;transition:stroke-dashoffset .3s ease-out,stroke-opacity .3s ease-in}.marker-cluster-small{background-color:#b5e28c99}.marker-cluster-small div{background-color:#6ecc3999}.marker-cluster-medium{background-color:#f1d35799}.marker-cluster-medium div{background-color:#f0c20c99}.marker-cluster-large{background-color:#fd9c7399}.marker-cluster-large div{background-color:#f1801799}.leaflet-oldie .marker-cluster-small{background-color:#b5e28c}.leaflet-oldie .marker-cluster-small div{background-color:#6ecc39}.leaflet-oldie .marker-cluster-medium{background-color:#f1d357}.leaflet-oldie .marker-cluster-medium div{background-color:#f0c20c}.leaflet-oldie .marker-cluster-large{background-color:#fd9c73}.leaflet-oldie .marker-cluster-large div{background-color:#f18017}.marker-cluster{background-clip:padding-box;border-radius:20px}.marker-cluster div{width:30px;height:30px;margin-left:5px;margin-top:5px;text-align:center;border-radius:15px;font:12px Helvetica Neue,Arial,Helvetica,sans-serif}.marker-cluster span{line-height:30px}body{font-family:system-ui,sans-serif;margin:1em;padding:0;background:#f8f9fa;min-width:320px;line-height:1.5}#app{max-width:800px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000012;padding:1.5em}#map{width:100%;height:500px;border-radius:6px;box-shadow:0 1px 4px #00000014;margin-top:1em;resize:vertical}#waypointInfo{margin:1em 0 0;width:100%;height:200px;overflow:auto;border:1px solid #ccc;border-radius:6px;background:#fafafa;resize:vertical}.smallFont{font-size:80%}.checkbox-group label{display:inline-flex;align-items:center;gap:.3em}@media only screen and (max-width:700px){body{margin:0}#app{padding:1em}}
/*$vite$:1*/`,document.head.appendChild(ht);var $={exports:{}},zt=$.exports,dt;function Nt(){return dt||(dt=1,(function(f,o){(function(s,d){d(o)})(zt,function(s){var d=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i=this._featureGroup,n=this._nonPointGroup,r=this.options.chunkedLoading,a=this.options.chunkInterval,l=this.options.chunkProgress,c=t.length,u=0,_=!0,m;if(this._map){var p=new Date().getTime(),g=L.bind(function(){var b=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();u<c;u++){if(r&&u%200===0){var M=new Date().getTime()-b;if(M>a)break}if(m=t[u],m instanceof L.LayerGroup){_&&(t=t.slice(),_=!1),this._extractNonGroupLayers(m,t),c=t.length;continue}if(!m.getLatLng){n.addLayer(m),e||this.fire("layeradd",{layer:m});continue}if(!this.hasLayer(m)&&(this._addLayer(m,this._maxZoom),e||this.fire("layeradd",{layer:m}),m.__parent&&m.__parent.getChildCount()===2)){var E=m.__parent.getAllChildMarkers(),P=E[0]===m?E[1]:E[0];i.removeLayer(P)}}l&&l(u,c,new Date().getTime()-p),u===c?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(g,this.options.chunkDelay)},this);g()}else for(var y=this._needsClustering;u<c;u++){if(m=t[u],m instanceof L.LayerGroup){_&&(t=t.slice(),_=!1),this._extractNonGroupLayers(m,t),c=t.length;continue}if(!m.getLatLng){n.addLayer(m);continue}this.hasLayer(m)||y.push(m)}return this},removeLayers:function(t){var e,i,n=t.length,r=this._featureGroup,a=this._nonPointGroup,l=!0;if(!this._map){for(e=0;e<n;e++){if(i=t[e],i instanceof L.LayerGroup){l&&(t=t.slice(),l=!1),this._extractNonGroupLayers(i,t),n=t.length;continue}this._arraySplice(this._needsClustering,i),a.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i})}return this}if(this._unspiderfy){this._unspiderfy();var c=t.slice(),u=n;for(e=0;e<u;e++){if(i=c[e],i instanceof L.LayerGroup){this._extractNonGroupLayers(i,c),u=c.length;continue}this._unspiderfyLayer(i)}}for(e=0;e<n;e++){if(i=t[e],i instanceof L.LayerGroup){l&&(t=t.slice(),l=!1),this._extractNonGroupLayers(i,t),n=t.length;continue}if(!i.__parent){a.removeLayer(i),this.fire("layerremove",{layer:i});continue}this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),r.hasLayer(i)&&(r.removeLayer(i),i.clusterShow&&i.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i=this._needsClustering.slice(),n=this._needsRemoving,r,a,l;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),a=i.length-1;a>=0;a--){for(r=!0,l=n.length-1;l>=0;l--)if(n[l].layer===i[a]){r=!1;break}r&&t.call(e,i[a])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(i){L.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(i=this._needsRemoving,e=i.length-1;e>=0;e--)if(i[e].layer===t)return!1;return!!(t.__parent&&t.__parent._group===this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=this._map;typeof e!="function"&&(e=function(){});var n=function(){(i.hasLayer(t)||i.hasLayer(t.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",n,this),this.off("animationend",n,this),i.hasLayer(t)?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var e,i,n;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],n.newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());e>=r&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var n=this._gridClusters,r=this._gridUnclustered,a=this._featureGroup,l=this._map,c=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var u=t.__parent,_=u._markers,m;for(this._arraySplice(_,t);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<c));)e&&u._childCount<=1?(m=u._markers[0]===t?u._markers[1]:u._markers[0],n[u._zoom].removeObject(u,l.project(u._cLatLng,u._zoom)),r[u._zoom].addObject(m,l.project(m.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(m),m.__parent=u.__parent,u._icon&&(a.removeLayer(u),i||a.addLayer(m))):u._iconNeedsUpdate=!0,u=u.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return e<10?i+="small":e<100?i+="medium":i+="large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,r=this.options.spiderfyOnEveryZoom;(e||n||r)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=t.layer,i=e;if(!(t.type==="clusterkeypress"&&t.originalEvent&&t.originalEvent.keyCode!==13)){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),this.options.spiderfyOnEveryZoom&&e.spiderfy(),t.originalEvent&&t.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this.options.spiderfyOnEveryZoom,r=this._map;(t||i||n)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),r.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;typeof i!="function"&&(n=function(){return i}),this.options.disableClusteringAtZoom!==null&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var r=t;r>=e;r--)this._gridClusters[r]=new L.DistanceGrid(n(r)),this._gridUnclustered[r]=new L.DistanceGrid(n(r));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i=this._gridClusters,n=this._gridUnclustered,r=Math.floor(this._map.getMinZoom()),a,l;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=r;e--){a=this._map.project(t.getLatLng(),e);var c=i[e].getNearObject(a);if(c){c._addChild(t),t.__parent=c;return}if(c=n[e].getNearObject(a),c){var u=c.__parent;u&&this._removeLayer(c,!1);var _=new this._markerCluster(this,e,c,t);i[e].addObject(_,this._map.project(_._cLatLng,e)),c.__parent=_,t.__parent=_;var m=_;for(l=e-1;l>u._zoom;l--)m=new this._markerCluster(this,l,m),i[l].addObject(m,this._map.project(c.getLatLng(),l));u._addChild(m),this._removeFromGridUnclustered(c,e);return}n[e].addObject(t,a)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(t){var e=this._maxLat;return e!==void 0&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(e._childCount===2){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i=t.getLayers(),n=0,r;for(e=e||[];n<i.length;n++){if(r=i[n],r instanceof L.LayerGroup){this._extractNonGroupLayers(r,e);continue}e.push(r)}return e},_overrideMarkerIcon:function(t){var e=t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}});return e}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i=this._getExpandedVisibleBounds(),n=this._featureGroup,r=Math.floor(this._map.getMinZoom()),a;this._ignoreMove=!0,this._topClusterLevel._recursively(i,t,r,function(l){var c=l._latlng,u=l._markers,_;for(i.contains(c)||(c=null),l._isSingleParent()&&t+1===e?(n.removeLayer(l),l._recursivelyAddChildrenToMap(null,e,i)):(l.clusterHide(),l._recursivelyAddChildrenToMap(c,e,i)),a=u.length-1;a>=0;a--)_=u[a],i.contains(_._latlng)||n.removeLayer(_)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,e),n.eachLayer(function(l){!(l instanceof L.MarkerCluster)&&l._icon&&l.clusterShow()}),this._topClusterLevel._recursively(i,t,e,function(l){l._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,t,r,function(l){n.removeLayer(l),l.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds(),r=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(n,r,e+1,i);var a=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue(function(){if(t._childCount===1){var l=t._markers[0];this._ignoreMove=!0,l.setLatLng(l.getLatLng()),this._ignoreMove=!1,l.clusterShow&&l.clusterShow()}else t._recursively(n,i,r,function(c){c._recursivelyRemoveChildrenFromMap(n,r,e+1)});a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var h=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(t,e);for(var n=this._markers.length-1;n>=0;n--)e&&this._markers[n].__dragStart||t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),r=this._zoom+1,a=i.getZoom(),l;e.length>0&&n>r;){r++;var c=[];for(l=0;l<e.length;l++)c=c.concat(e[l]._childClusters);e=c}n>r?this._group._map.setView(this._latlng,r):n<=a?this._group._map.setView(this._latlng,a+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t=this._markers,e=this._childClusters,i=0,n=0,r=this._childCount,a,l,c,u;if(r!==0){for(this._resetBounds(),a=0;a<t.length;a++)c=t[a]._latlng,this._bounds.extend(c),i+=c.lat,n+=c.lng;for(a=0;a<e.length;a++)l=e[a],l._boundsNeedUpdate&&l._recalculateBounds(),this._bounds.extend(l._bounds),c=l._wLatLng,u=l._childCount,i+=c.lat*u,n+=c.lng*u;this._latlng=this._wLatLng=new L.LatLng(i/r,n/r),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,function(n){var r=n._markers,a,l;for(a=r.length-1;a>=0;a--)l=r[a],l._icon&&(l._setPos(e),l.clusterHide())},function(n){var r=n._childClusters,a,l;for(a=r.length-1;a>=0;a--)l=r[a],l._icon&&(l._setPos(e),l.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,n){this._recursively(t,n,e,function(r){r._recursivelyAnimateChildrenIn(t,r._group._map.latLngToLayerPoint(r.getLatLng()).round(),i),r._isSingleParent()&&i-1===n?(r.clusterShow(),r._recursivelyRemoveChildrenFromMap(t,e,i)):r.clusterHide(),r._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,function(n){if(e!==n._zoom)for(var r=n._markers.length-1;r>=0;r--){var a=n._markers[r];i.contains(a._latlng)&&(t&&(a._backupLatlng=a.getLatLng(),a.setLatLng(t),a.clusterHide&&a.clusterHide()),n._group._featureGroup.addLayer(a))}},function(n){n._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var r,a;this._recursively(t,e-1,i-1,function(l){for(a=l._markers.length-1;a>=0;a--)r=l._markers[a],(!n||!n.contains(r._latlng))&&(l._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())},function(l){for(a=l._childClusters.length-1;a>=0;a--)r=l._childClusters[a],(!n||!n.contains(r._latlng))&&(l._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())})},_recursively:function(t,e,i,n,r){var a=this._childClusters,l=this._zoom,c,u;if(e<=l&&(n&&n(this),r&&l===i&&r(this)),l<e||l<i)for(c=a.length-1;c>=0;c--)u=a[c],u._boundsNeedUpdate&&u._recalculateBounds(),t.intersects(u._bounds)&&u._recursively(t,e,i,n,r)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),r=this._grid,a=r[n]=r[n]||{},l=a[i]=a[i]||[],c=L.Util.stamp(t);this._objectPoint[c]=e,l.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),r=this._grid,a=r[n]=r[n]||{},l=a[i]=a[i]||[],c,u;for(delete this._objectPoint[L.Util.stamp(t)],c=0,u=l.length;c<u;c++)if(l[c]===t)return l.splice(c,1),u===1&&delete a[i],!0},eachObject:function(t,e){var i,n,r,a,l,c,u,_=this._grid;for(i in _){l=_[i];for(n in l)for(c=l[n],r=0,a=c.length;r<a;r++)u=t.call(e,c[r]),u&&(r--,a--)}},getNearObject:function(t){var e=this._getCoord(t.x),i=this._getCoord(t.y),n,r,a,l,c,u,_,m,p=this._objectPoint,g=this._sqCellSize,y=null;for(n=i-1;n<=i+1;n++)if(l=this._grid[n],l){for(r=e-1;r<=e+1;r++)if(c=l[r],c)for(a=0,u=c.length;a<u;a++)_=c[a],m=this._sqDist(p[L.Util.stamp(_)],t),(m<g||m<=g&&y===null)&&(g=m,y=_)}return y},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},(function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat,n=e[0].lng-e[1].lng;return n*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i=0,n=null,r=[],a,l,c;for(a=e.length-1;a>=0;a--){if(l=e[a],c=this.getDistant(l,t),c>0)r.push(l);else continue;c>i&&(i=c,n=l)}return{maxPoint:n,newPoints:r}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints)),i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints)),i):[t[0]]},getConvexHull:function(t){var e=!1,i=!1,n=!1,r=!1,a=null,l=null,c=null,u=null,_=null,m=null,p;for(p=t.length-1;p>=0;p--){var g=t[p];(e===!1||g.lat>e)&&(a=g,e=g.lat),(i===!1||g.lat<i)&&(l=g,i=g.lat),(n===!1||g.lng>n)&&(c=g,n=g.lng),(r===!1||g.lng<r)&&(u=g,r=g.lng)}i!==e?(m=l,_=a):(m=u,_=c);var y=[].concat(this.buildConvexHull([m,_],t),this.buildConvexHull([_,m],t));return y}}})(),L.MarkerCluster.include({getConvexHull:function(){var t=this.getAllChildMarkers(),e=[],i,n;for(n=t.length-1;n>=0;n--)i=t[n].getLatLng(),e.push(i);return L.QuickHull.getConvexHull(e)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var t=this.getAllChildMarkers(null,!0),e=this._group,i=e._map,n=i.latLngToLayerPoint(this._latlng),r;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?r=this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?r=this._generatePointsSpiral(t.length,n):(n.y+=10,r=this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,r)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),n=i/this._2PI,r=this._2PI/t,a=[],l,c;for(n=Math.max(n,35),a.length=t,l=0;l<t;l++)c=this._circleStartAngle+l*r,a[l]=new L.Point(e.x+n*Math.cos(c),e.y+n*Math.sin(c))._round();return a},_generatePointsSpiral:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier,n=i*this._spiralLengthStart,r=i*this._spiralFootSeparation,a=i*this._spiralLengthFactor*this._2PI,l=0,c=[],u;for(c.length=t,u=t;u>=0;u--)u<t&&(c[u]=new L.Point(e.x+n*Math.cos(l),e.y+n*Math.sin(l))._round()),l+=r/n+u*5e-4,n+=a/l;return c},_noanimationUnspiderfy:function(){var t=this._group,e=t._map,i=t._featureGroup,n=this.getAllChildMarkers(null,!0),r,a;for(t._ignoreMove=!0,this.setOpacity(1),a=n.length-1;a>=0;a--)r=n[a],i.removeLayer(r),r._preSpiderfyLatlng&&(r.setLatLng(r._preSpiderfyLatlng),delete r._preSpiderfyLatlng),r.setZIndexOffset&&r.setZIndexOffset(0),r._spiderLeg&&(e.removeLayer(r._spiderLeg),delete r._spiderLeg);t.fire("unspiderfied",{cluster:this,markers:n}),t._ignoreMove=!1,t._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i=this._group,n=i._map,r=i._featureGroup,a=this._group.options.spiderLegPolylineOptions,l,c,u,_;for(i._ignoreMove=!0,l=0;l<t.length;l++)_=n.layerPointToLatLng(e[l]),c=t[l],u=new L.Polyline([this._latlng,_],a),n.addLayer(u),c._spiderLeg=u,c._preSpiderfyLatlng=c._latlng,c.setLatLng(_),c.setZIndexOffset&&c.setZIndexOffset(1e6),r.addLayer(c);this.setOpacity(.3),i._ignoreMove=!1,i.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i=this,n=this._group,r=n._map,a=n._featureGroup,l=this._latlng,c=r.latLngToLayerPoint(l),u=L.Path.SVG,_=L.extend({},this._group.options.spiderLegPolylineOptions),m=_.opacity,p,g,y,b,M,E;for(m===void 0&&(m=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),u?(_.opacity=0,_.className=(_.className||"")+" leaflet-cluster-spider-leg"):_.opacity=m,n._ignoreMove=!0,p=0;p<t.length;p++)g=t[p],E=r.layerPointToLatLng(e[p]),y=new L.Polyline([l,E],_),r.addLayer(y),g._spiderLeg=y,u&&(b=y._path,M=b.getTotalLength()+.1,b.style.strokeDasharray=M,b.style.strokeDashoffset=M),g.setZIndexOffset&&g.setZIndexOffset(1e6),g.clusterHide&&g.clusterHide(),a.addLayer(g),g._setPos&&g._setPos(c);for(n._forceLayout(),n._animationStart(),p=t.length-1;p>=0;p--)E=r.layerPointToLatLng(e[p]),g=t[p],g._preSpiderfyLatlng=g._latlng,g.setLatLng(E),g.clusterShow&&g.clusterShow(),u&&(y=g._spiderLeg,b=y._path,b.style.strokeDashoffset=0,y.setStyle({opacity:m}));this.setOpacity(.3),n._ignoreMove=!1,setTimeout(function(){n._animationEnd(),n.fire("spiderfied",{cluster:i,markers:t})},200)},_animationUnspiderfy:function(t){var e=this,i=this._group,n=i._map,r=i._featureGroup,a=t?n._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):n.latLngToLayerPoint(this._latlng),l=this.getAllChildMarkers(null,!0),c=L.Path.SVG,u,_,m,p,g,y;for(i._ignoreMove=!0,i._animationStart(),this.setOpacity(1),_=l.length-1;_>=0;_--)u=l[_],u._preSpiderfyLatlng&&(u.closePopup(),u.setLatLng(u._preSpiderfyLatlng),delete u._preSpiderfyLatlng,y=!0,u._setPos&&(u._setPos(a),y=!1),u.clusterHide&&(u.clusterHide(),y=!1),y&&r.removeLayer(u),c&&(m=u._spiderLeg,p=m._path,g=p.getTotalLength()+.1,p.style.strokeDashoffset=g,m.setStyle({opacity:0})));i._ignoreMove=!1,setTimeout(function(){var b=0;for(_=l.length-1;_>=0;_--)u=l[_],u._spiderLeg&&b++;for(_=l.length-1;_>=0;_--)u=l[_],u._spiderLeg&&(u.clusterShow&&u.clusterShow(),u.setZIndexOffset&&u.setZIndexOffset(0),b>1&&r.removeLayer(u),n.removeLayer(u._spiderLeg),delete u._spiderLeg);i._animationEnd(),i.fire("unspiderfied",{cluster:e,markers:l})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=d,s.MarkerCluster=h,Object.defineProperty(s,"__esModule",{value:!0})})})($,$.exports)),$.exports}Nt();const N={strNumFormat(f,o,s=" "){let d=String(f);for(let h=d.length;h<o;h+=1)d=s+d;return d},strZeroFormat(f,o){return N.strNumFormat(f,o,"0")}};class x{lat;lng;format;comment;error;constructor(o,s){this.lat=0,this.lng=0,o!==void 0&&s!==void 0&&this.init(o,s)}init(o,s){this.setLatLng(o,s)}static toRadians(o){return o*Math.PI/180}static toDegrees(o){return o*180/Math.PI}clone(){const o=new x;return Object.assign(o,this),o}getLat(){return this.lat}getLng(){return this.lng}setLatLng(o,s){return this.lat=Number(o),this.lng=Number(s),this}getComment(){return this.comment??""}setComment(o){return this.comment=o,this}getFormat(){return this.format}setFormat(o){return this.format=o,this}getError(){return this.error}setError(o){return this.error=o,this}toString(){return Object.values(this).join(",")}distanceTo(o){const d=x.toRadians(this.lat),h=x.toRadians(this.lng),t=x.toRadians(o.lat),e=x.toRadians(o.lng),i=t-d,n=e-h,r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(d)*Math.cos(t)*Math.sin(n/2)*Math.sin(n/2);return 6371e3*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}bearingTo(o){const s=x.toRadians(this.lat),d=x.toRadians(o.lat),h=x.toRadians(o.lng-this.lng),t=Math.sin(h)*Math.cos(d),e=Math.cos(s)*Math.sin(d)-Math.sin(s)*Math.cos(d)*Math.cos(h),i=Math.atan2(t,e);return(x.toDegrees(i)+360)%360}destinationPoint(o,s){const h=Number(o)/6371e3,t=x.toRadians(Number(s)),e=x.toRadians(this.lat),i=x.toRadians(this.lng),n=Math.sin(e),r=Math.cos(e),a=Math.sin(h),l=Math.cos(h),c=Math.sin(t),u=Math.cos(t),_=n*l+r*a*u,m=Math.asin(_),p=c*a*r,g=l-n*_,y=i+Math.atan2(p,g);return new x(x.toDegrees(m),(x.toDegrees(y)+540)%360-180)}intersection(o,s,d,h){const t=x.toRadians(o.lat),e=x.toRadians(o.lng),i=x.toRadians(d.lat),n=x.toRadians(d.lng),r=x.toRadians(Number(s)),a=x.toRadians(Number(h)),l=i-t,c=n-e,u=2*Math.asin(Math.sqrt(Math.sin(l/2)*Math.sin(l/2)+Math.cos(t)*Math.cos(i)*Math.sin(c/2)*Math.sin(c/2)));if(u===0)return new x(0,0).setError("intersection distance=0");const _=(Math.sin(i)-Math.sin(t)*Math.cos(u))/(Math.sin(u)*Math.cos(t)),m=(Math.sin(t)-Math.sin(i)*Math.cos(u))/(Math.sin(u)*Math.cos(i)),p=Math.acos(Math.min(Math.max(_,-1),1)),g=Math.acos(Math.min(Math.max(m,-1),1)),y=Math.sin(n-e)>0?p:2*Math.PI-p,b=Math.sin(n-e)>0?2*Math.PI-g:g,M=(r-y+Math.PI)%(2*Math.PI)-Math.PI,E=(b-a+Math.PI)%(2*Math.PI)-Math.PI;if(Math.sin(M)===0&&Math.sin(E)===0)return new x(0,0).setError("infinite intersections");if(Math.sin(M)*Math.sin(E)<0)return new x(0,0).setError("ambiguous intersection");const P=Math.acos(-Math.cos(M)*Math.cos(E)+Math.sin(M)*Math.sin(E)*Math.cos(u)),v=Math.atan2(Math.sin(u)*Math.sin(M)*Math.sin(E),Math.cos(E)+Math.cos(M)*Math.cos(P)),k=Math.asin(Math.sin(t)*Math.cos(v)+Math.cos(t)*Math.sin(v)*Math.cos(r)),C=Math.atan2(Math.sin(r)*Math.sin(v)*Math.cos(t),Math.cos(v)-Math.sin(t)*Math.sin(k)),I=e+C;return new x(x.toDegrees(k),(x.toDegrees(I)+540)%360-180)}parse(o){let s=0,d=0,h="";function t(){const a=o.match(/^\s*(N|S)\s*(\d+)\s*[° ]\s*(\d+\.\d+)\s*(E|W)\s*(\d+)\s*[° ]\s*(\d+\.\d+)/);return a&&a.length===7?(s=parseInt(a[2],10)+parseFloat(a[3])/60,d=parseInt(a[5],10)+parseFloat(a[6])/60,a[1]==="S"&&(s=-s),a[4]==="W"&&(d=-d),h="dmm",!0):!1}function e(){const a=o.match(/^\s*(N|S)\s*(\d+)\s*[° ]\s*(\d+)\s*'\s*(\d+\.?\d*)\s*"\s*(E|W)\s*(\d+)\s*[° ]\s*(\d+)\s*'\s*(\d+\.?\d*)\s*"/);return a&&a.length===9?(s=parseInt(a[2],10)+parseFloat(a[3])/60+parseFloat(a[4])/3600,d=parseInt(a[6],10)+parseFloat(a[7])/60+parseFloat(a[8])/3600,a[1]==="S"&&(s=-s),a[5]==="W"&&(d=-d),h="dms",!0):!1}function i(){const a=o.match(/^\s*(N|S)\s*(\d+\.\d+)\s*[° ]\s*(E|W)\s*(\d+\.\d+)\s*°?/);return a&&a.length===5?(s=parseFloat(a[2]),d=parseFloat(a[4]),a[1]==="S"&&(s=-s),a[3]==="W"&&(d=-d),h="dd",!0):!1}const n=o.indexOf("!");n>=0?(this.comment=o.substr(n+1),o=o.substr(0,n)):this.comment!==void 0&&delete this.comment;const r=t()||e()||i();return this.lat=s,this.lng=d,h&&(this.format=h+(this.comment?"c":"")),delete this.error,!r&&o!==""&&(this.error="Cannot parse "+o,console.warn("parse2position: Cannot parse '"+o+"'")),this}toFixed(o){return this.lat=Number(Number(this.lat).toFixed(o)),this.lng=Number(Number(this.lng).toFixed(o)),this}toFormattedString(o){let s,d;function h(i){const n=Math.abs(i.lat),r=Math.abs(i.lng),a=i.lat>=0?"N":"S",l=i.lng>=0?"E":"W",c=Math.floor(n),u=(n-c)*60,_=Math.floor(r),m=(r-_)*60;return a+" "+N.strZeroFormat(c,2)+"° "+N.strZeroFormat(u.toFixed(3),6)+" "+l+" "+N.strZeroFormat(_,3)+"° "+N.strZeroFormat(m.toFixed(3),6)}function t(i){const n=Math.abs(i.lat),r=Math.abs(i.lng),a=i.lat>=0?"N":"S",l=i.lng>=0?"E":"W",c=Math.floor(n),u=Math.floor((n-c)*60),_=Math.round((n-c-u/60)*1e3*3600)/1e3,m=Math.floor(r),p=Math.floor((r-m)*60),g=Math.floor((r-m-p/60)*1e3*3600)/1e3;return a+" "+N.strZeroFormat(c,2)+"° "+N.strZeroFormat(u,2)+"' "+N.strZeroFormat(_.toFixed(2),5)+'" '+l+" "+N.strZeroFormat(m,3)+"° "+N.strZeroFormat(p,2)+"' "+N.strZeroFormat(g.toFixed(2),5)+'"'}function e(i){let n=i.lat,r=i.lng;const a=n>=0?"N":"S",l=r>=0?"E":"W";return a==="S"&&(n=-n),l==="W"&&(r=-r),a+" "+N.strZeroFormat(n.toFixed(5),8)+"° "+l+" "+N.strZeroFormat(r.toFixed(5),9)+"°"}switch(o=o||this.format||"dmm",o.charAt(o.length-1)==="c"&&(o=o.substr(0,o.length-1),d=this.getComment()),o){case"dmm":s=h(this);break;case"dms":s=t(this);break;case"dd":s=e(this);break;default:s="",console.warn("position2string: Unknown format: "+o)}return d&&(s+="!"+d),s}}const pt="_concat abs acos asin atan bearing cb center cls cos count cp ct d2r deg distance encode format goto ic instr int lc len mid mod pc project r2d rad replace reverse rot13 show skeleton sin sqrt sval tan uc val".split(" "),gt="endif if stop then".split(" "),mt=[...pt,...gt].reduce((f,o)=>(f[o]=!0,f),{}),K=f=>f*Math.PI/180,J=f=>f*180/Math.PI,et=(f,o)=>{f=String(f);for(let s=f.length;s<o;s+=1)f="0"+f;return f},Tt=(f,o)=>{if(o.indexOf(".")<0)f=Number(f).toFixed(0),f=et(f,o.length);else{const s=o.split(".",2);f=Number(f).toFixed(s[1].length),f=et(f,o.length)}return f},Bt=f=>f.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");class S{options;constructor(o){this.options=o||{}}static ErrorObject=class extends Error{value;pos;constructor(o,s,d){super(`${o}: ${s} (pos: ${d})`),this.value=s,this.pos=d,this.name="ScriptParserError"}};lex(o){const s=v=>/[#]/.test(v),d=v=>/[+\-*/^%=<>()[\],;]/.test(v),h=v=>/[0-9]/.test(v),t=v=>/\s/.test(v),e=v=>/["]/.test(v),i=v=>v!==""&&!e(v),n=v=>/[']/.test(v),r=v=>v!==""&&!n(v),a=v=>v!==""&&/[$\w]/.test(v),l=v=>/[:]/.test(v),c=v=>v!==""&&/[0#.]/.test(v),u=v=>v!==""&&v!==`
`,_=[];let m,p,g,y=0;const b=()=>(y+=1,o.charAt(y)),M=v=>{let k="";do k+=p,p=b();while(v(p));return k},E=v=>{let k="";do p==="\\"&&(p=b(),p==="n"&&(p=`
`)),k+=p,p=b();while(v(p));return k},P=(v,k,C)=>{_.push({type:v,value:k,pos:C})};for(;y<o.length;)if(g=y,p=o.charAt(y),t(p))p=b();else if(s(p))M(u);else if(d(p)){let v=p;const k=o.charAt(y+1);((p==="<"||p===">")&&k==="="||p==="<"&&k===">")&&(v+=k,b()),P(v,"",g),p=b()}else if(h(p)){m=M(h),p==="."&&(m+=M(h));const v=parseFloat(m);if(!isFinite(v))throw new S.ErrorObject("Number is too large or too small",m,g);P("number",m,g)}else if(e(p)){if(p="",m=E(i),P("string",m,g+1),!e(p))throw new S.ErrorObject("Unterminated string",m,g+1);p=b()}else if(n(p)){if(p="",m=M(r),P("string",m,g+1),!n(p))throw new S.ErrorObject("Unterminated string",m,g+1);p=b()}else if(a(p))m=M(a),mt[m.toLowerCase()]?P(m.toLowerCase(),"",g):P("identifier",m,g);else if(l(p)){if(p="",m=M(c),P("formatter",m,g),!l(p))throw new S.ErrorObject("Unterminated formatter",m,g+1);p=b()}else throw new S.ErrorObject("Unrecognized token",p,g);return P("(end)","",y),_}parse(o){const s={};let d=0;const h=[],t=p=>p,e=(p,g,y,b)=>{let M=s[p];M||(s[p]={},M=s[p]),g&&(M.nud=g),y&&(M.lbp=y),b&&(M.led=b)},i=p=>{if(!p)throw new S.ErrorObject("No token","",0);return p},n=()=>i(o[d]),r=()=>(d+=1,n()),a=p=>{let g=n(),y=s[g.type];if(r(),!y.nud)throw g.type==="(end)"?new S.ErrorObject("Unexpected end of file","",g.pos):new S.ErrorObject("Unexpected token (nud)",g.type,g.pos);let b=y.nud(g);for(g=n(),y=s[g.type];p<(y.lbp||0);){if(g=n(),r(),!y.led)throw new S.ErrorObject("Unexpected token",g.type,o[d].pos);b=y.led(b),g=n(),y=s[g.type]}return b},l=(p,g,y,b)=>{y=y||g,e(p,void 0,g,b||function(M){return{type:p,left:M,right:a(y)}})},c=(p,g)=>{e(p,()=>({type:p,right:a(g)}))};e(","),e(")"),e("]"),e("(end)"),e(";"),e("number",t),e("string",t),e("identifier",p=>p);function u(p){if(n().type==="("){const g=d,y=[];if(o[d+1].type===")")r();else{do r(),y.push(a(2));while(n().type===",");if(n().type!==")")throw new S.ErrorObject("Expected closing parenthesis for function",String(o[g-1].type),o[g].pos)}return r(),{type:p.type,args:y,name:"",value:"",pos:o[g-1].pos}}return p}function _(){for(const p of pt)e(p,u);for(const p of gt)e(p,u)}_(),e("(",()=>{const p=d,g=a(2);if(n().type!==")")throw new S.ErrorObject("Expected closing parenthesis",")",o[p].pos);return r(),g}),e("[",function(){let p=n(),g;if(p.type==="(end)")throw new S.ErrorObject("Unexpected end of file","",p.pos);if(o[d+1].type==="]")g=a(2);else{const y=d,b=[];do b.push(a(2)),p=n();while(p.type!=="]"&&p.type!=="(end)");if(p.type!=="]")throw new S.ErrorObject("Expected closing bracket","]",o[y].pos);g={type:"_concat",args:b,name:"",value:"",pos:o[y-1].pos}}return r(),g});let m=!1;for(e("if",()=>{m=!0;const p=a(0);if(m=!1,n().type!=="then")throw new S.ErrorObject("Expected THEN","",n().pos);r();const g=[];for(;n().type!=="endif"&&n().type!=="(end)";)g.push(a(0)),n().type===";"&&r();if(n().type!=="endif")throw new S.ErrorObject("Expected ENDIF","",n().pos);return r(),{type:"if",left:p,args:g,pos:p.pos,value:""}}),e("formatter",void 0,3,p=>{const g=o[d-1];return{type:"formatter",value:g.value,left:p,pos:g.pos}}),c("-",8),l("^",7,6),l("*",5),l("/",5),l("%",5),l("+",4),l("-",4),l("<",4),l(">",4),l("<=",4),l(">=",4),l("<>",4),l("=",3,2,p=>{let g;return p.type==="identifier"&&!m?g={type:"assign",name:p.value,value:"",right:a(0),pos:p.pos}:g={type:"=",left:p,right:a(2),value:"",pos:p.pos},g});n().type!=="(end)";)h.push(a(0));return h}evaluate(o,s,d){const h=this,t={"+":(c,u)=>Number(c)+Number(u),"-":(c,u)=>u===null?-Number(c):Number(c)-Number(u),"*":(c,u)=>Number(c)*Number(u),"/":(c,u)=>Number(c)/Number(u),"%":(c,u)=>Number(c)%Number(u),"^":(c,u)=>Math.pow(Number(c),Number(u)),"=":(c,u)=>String(c)===String(u),"<>":(c,u)=>String(c)!==String(u),"<":(c,u)=>String(c)<String(u),">":(c,u)=>String(c)>String(u),"<=":(c,u)=>String(c)<=String(u),">=":(c,u)=>String(c)>=String(u)},e=d,i=[],n=(c,u,_)=>{const m=e[c];if(m.length!==u.length){const p=e[`${c}_optionalArgs`]?.();if(p){if(p===Number.POSITIVE_INFINITY)return;const g=m.length-Number(p);if(u.length>=g&&u.length<=m.length)return}throw console.warn("WARN: oFunction=",String(m)),new S.ErrorObject(`Wrong number of arguments (${m.length}, ${u.length}) for function`,c,_)}},r=c=>h.options.ignoreFuncCase?c.toLowerCase():c,a=c=>h.options.ignoreVarCase?c.toLowerCase():c,l=c=>{let u,_;if(c.type==="string")u=c.value;else if(c.type==="number")u=parseFloat(c.value);else if(t[c.type])c.left?u=t[c.type](l(c.left),l(c.right)):u=t[c.type](l(c.right),null);else if(c.type==="identifier")_=a(c.value),u=s.get(_),u===void 0&&(console.log(`Variable is undefined: ${c.value} (pos ${c.pos})`),u="");else if(c.type==="assign"){if(u=l(c.right),_=a(c.name),u===null)throw new S.ErrorObject("value is null",_,c.pos);s.set(_,u),String(parseFloat(String(u)))!==String(u)&&(u='"'+u+'"'),u=c.name+"="+u}else if(c.type==="if")if(l(c.left)){const p=[];for(const g of c.args){const y=l(g);y===null?g.type==="cls"?(i.length=0,p.length=0):g.type:y!==""&&p.push(String(y))}u=p.join(`
`)}else u="";else if(c.type==="stop")u=null;else if(mt[c.type]){const m=[];for(let p=0;p<c.args.length;p+=1)m[p]=l(c.args[p]);if(_=r(c.type),e[_]===void 0)throw new S.ErrorObject("Function is undefined",_,c.pos);n(_,m,c.pos),u=e[_].apply(c,m)}else c.type==="formatter"?(u=l(c.left),u=Tt(String(u),c.value)):(console.error("parseNode node=%o unknown type="+c.type,c),u=String(c));return u};for(let c=0;c<o.length;c+=1){const u=o[c],_=l(u);_===null?u.type==="cls"?i.length=0:u.type==="stop"&&(c=o.length):_!==""&&i.push(String(_))}return i.join(`
`)}calculate(o,s){const d=this,h={_concat_optionalArgs:()=>Number.POSITIVE_INFINITY,_concat:(...n)=>n.join(""),abs:n=>Math.abs(n),acos:n=>J(Math.acos(n)),asin:n=>J(Math.asin(n)),atan:n=>J(Math.atan(n)),bearing:function(n,r){const a=new x().parse(n),l=new x().parse(r);return a.bearingTo(l)},cb:function(n,r,a,l){const c=new x().parse(n),u=new x().parse(a),_=x.prototype.intersection(c,r,u,l),m=_.getError();let p=_.toFormattedString();return m&&(p+="!error!"+m),p},center:()=>(console.log("center() ignored."),""),cls:()=>null,cos:n=>Math.cos(K(n)),count:function(n,r){let a="";if(n=String(n),r=String(r),r.length===1)return h.countStr(n,r);const l=r.split("");for(let c=0;c<l.length;c+=1){const u=l[c];a+=" "+u+"="+h.countStr(n,u)}return a.trim()},countStr:function(n,r){return(String(n).match(new RegExp(r,"g"))||[]).length},ct:function(n){const r=String(n).replace(/[^\d]/g,"");let a=0;for(let l=0;l<r.length;l+=1)a+=Number(r.charAt(l));return a},d2r:n=>K(n),deg:()=>(console.log("deg() ignored."),""),distance:function(n,r){const a=new x().parse(n),l=new x().parse(r);return a.distanceTo(l)},encode:function(n,r,a){const l=new RegExp("["+r+"]","g");return n.replace(l,function(c){return a.charAt(r.indexOf(c))})},format:function(n,r){const l=new x().parse(n).toFormattedString(r);if(!l)throw new S.ErrorObject("Unknown format",r,-1);return l},goto:n=>(console.log(`goto ${n}: ignored.`),""),ic_optionalArgs:()=>1,ic:function(n){return typeof n>"u"?!!d.options.ignoreVarCase:(d.options.ignoreVarCase=!!n,"")},instr_optionalArgs:()=>1,instr:function(n,r,a){return String(n).indexOf(r,a?a-1:0)+1},int:Math.trunc,lc:n=>String(n).toLowerCase(),len:n=>String(n).length,mid:function(n,r,a){return String(n).substr(r-1,a)},mod:function(n,r){return n%r},pc:()=>(console.warn("pc ignored."),""),project:function(n,r,a){return new x().parse(n).destinationPoint(a,r).toFormattedString()},r2d:n=>J(n),rad:()=>(console.warn("rad ignored."),""),replace:function(n,r,a){const l=Bt(r),c=new RegExp(l,"g");return String(n).replace(c,a)},reverse:function(n){return String(n).split("").reverse().join("")},rot13:function(n){return String(n).replace(/[A-Za-z]/g,function(r){return String.fromCharCode(r.charCodeAt(0)+(r.toUpperCase()<="M"?13:-13))})},show:()=>(console.warn("show ignored."),""),sin:n=>Math.sin(K(n)),skeleton:()=>(console.warn("skeleton ignored."),""),sqrt:Math.sqrt,sval:function(n){let a="";n=String(n).toLowerCase().replace(/[^a-z]/g,"");for(let l=0;l<n.length;l+=1)a+=(l>0?" ":"")+et(String(n.charCodeAt(l)-96),2);return a},tan:n=>Math.tan(K(n)),uc:n=>String(n).toUpperCase(),val:function(n){let a=0;n=String(n).toLowerCase();for(let l=0;l<n.length;l+=1){let c=n.charCodeAt(l)-96;(c<0||c>26)&&(c=0),a+=c}return a}},t=this.lex(o),e=this.parse(t);return this.evaluate(e,s,h)}}const W={eocdSignature:101010256,cdfhSignature:33639248,lfhSignature:67324752,eocdLen:22,cdfhLen:46,lfhLen:30};function Dt(f){let s="",d=f.length,h=0;for(;d>0;){const t=Math.min(d,25e3),e=f.subarray(h,h+t);s+=String.fromCharCode.apply(null,e),h+=t,d-=t}return s}class w{options;data;entryTable={};static textDecoder=typeof TextDecoder<"u"?new TextDecoder("utf-8",{fatal:!1}):{decode:Dt};constructor(o){this.options={},this.setOptions(o,!0)}getOptions(){return this.options}setOptions(o,s){const d=this.options.data;Object.assign(this.options,o),(s||this.options.data!==d)&&(this.data=this.options.data,this.entryTable=this.readZipDirectory())}static createCrcTable(){const o=new Uint32Array(256);for(let s=0;s<256;s+=1){let d=s;for(let h=0;h<8;h+=1)d=d&1?3988292384^d>>>1:d>>>1;o[s]=d>>>0}return o}static crcTable=void 0;static zipCryptoCrc32(o,s){const d=w.crcTable||(w.crcTable=w.createCrcTable());return(o>>>8^d[(o^s)&255])>>>0}static zipCryptoUpdateKeys(o,s){o[0]=w.zipCryptoCrc32(o[0],s),o[1]=o[1]+(o[0]&255)>>>0,o[1]=(Math.imul(o[1],134775813)>>>0)+1>>>0,o[2]=w.zipCryptoCrc32(o[2],o[1]>>>24&255)}static zipCryptoInitKeys(o){const s=[305419896,591751049,878082192];for(let d=0;d<o.length;d+=1)w.zipCryptoUpdateKeys(s,o.charCodeAt(d));return s}static zipCryptoDecryptByte(o,s){const d=(o[2]|2)>>>0,h=s^Math.imul(d,d^1)>>>8&255;return w.zipCryptoUpdateKeys(o,h),h}static zipCryptoDecrypt(o,s,d){const h=w.zipCryptoInitKeys(d),t=new Uint8Array(12);for(let n=0;n<12;n+=1){const r=w.zipCryptoDecryptByte(h,o[n]);t[n]=r}let e;if((s.flag&8)!==0?e=s.modificationTime>>8&255:e=s.crc>>24&255,t[11]!==e)throw new Error("Zip: The password did not match.");const i=new Uint8Array(o.length-12);for(let n=12;n<o.length;n+=1){const r=w.zipCryptoDecryptByte(h,o[n]);i[n-12]=r}return i}getZipDirectory(){return this.entryTable}static convertUint8ArrayToUtf8(o){return w.textDecoder.decode(o)}static getUint16(o,s){return o[s+1]<<8|o[s]}static getUint32(o,s){return o[s+3]<<24|o[s+2]<<16|o[s+1]<<8|o[s]}readAsUTF8(o,s){const d=this.data.subarray(o,o+s);return w.convertUint8ArrayToUtf8(d)}readEocd(o){const s=this.data;return{signature:w.getUint32(s,o),entries:w.getUint16(s,o+10),cdfhOffset:w.getUint32(s,o+16),cdSize:w.getUint32(s,o+20)}}readCdfh(o){const s=this.data;return{signature:w.getUint32(s,o),version:w.getUint16(s,o+6),flag:w.getUint16(s,o+8),compressionMethod:w.getUint16(s,o+10),modificationTime:w.getUint16(s,o+12),crc:w.getUint32(s,o+16),compressedSize:w.getUint32(s,o+20),size:w.getUint32(s,o+24),fileNameLength:w.getUint16(s,o+28),extraFieldLength:w.getUint16(s,o+30),fileCommentLength:w.getUint16(s,o+32),localOffset:w.getUint32(s,o+42),name:"",isDirectory:!1,extra:[],comment:"",timestamp:0,dataStart:0}}readZipDirectory(){const s=this.data,d={};let h=s.length-W.eocdLen+1,t;const e=Math.max(0,h-65535);for(;h>=e&&(h-=1,!(w.getUint32(s,h)===W.eocdSignature&&(t=this.readEocd(h),w.getUint32(s,t.cdfhOffset)===W.cdfhSignature))););if(!t)throw new Error(`Zip: File ended abruptly: EOCD not found at pos ${h>=0?h:0}`);const i=t.entries;let n=t.cdfhOffset;for(h=0;h<i;h+=1){const r=this.readCdfh(n);if(r.signature!==W.cdfhSignature)throw new Error(`Zip: Bad CDFH signatureat pos ${n}`);if(!r.fileNameLength)throw new Error(`Zip Entry name missing at pos ${n}`);if(n+=W.cdfhLen,r.name=this.readAsUTF8(n,r.fileNameLength),n+=r.fileNameLength,r.isDirectory=r.name.charAt(r.name.length-1)==="/",r.extra=this.data.subarray(n,n+r.extraFieldLength),n+=r.extraFieldLength,r.comment=this.readAsUTF8(n,r.fileCommentLength),n+=r.fileCommentLength,(r.flag&64)===64)throw new Error("Zip: Strong encryption not suppoered.");if((r.flag&8192)===8192)throw new Error("Zip: Strong directory encryption not suppoered.");const a=r.modificationTime;r.timestamp=new Date((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1).getTime(),w.getUint32(s,r.localOffset)!==W.lfhSignature&&console.error("Zip: readZipDirectory: LFH signature not found at offset",r.localOffset);const l=w.getUint16(s,r.localOffset+28);r.dataStart=r.localOffset+W.lfhLen+r.name.length+l,d[r.name]=r}return d}static fnInflateConstruct(o,s,d){let h;for(h=0;h<=15;h+=1)o.count[h]=0;for(h=0;h<d;h+=1)o.count[s[h]]+=1;if(o.count[0]===d)return 0;let t=1;for(h=1;h<=15;h+=1)if((t=(t<<1)-o.count[h])<0)return t;const e=[void 0,0];for(h=1;h<15;h+=1)e[h+1]=e[h]+o.count[h];for(h=0;h<d;h+=1)s[h]!==0&&(o.symbol[e[s[h]]]=h,e[s[h]]+=1);return t}static fnConstructFixedHuffman(o,s,d){let h;for(h=0;h<144;h+=1)o[h]=8;for(;h<256;h+=1)o[h]=9;for(;h<280;h+=1)o[h]=7;for(;h<288;h+=1)o[h]=8;for(w.fnInflateConstruct(s,o,288),h=0;h<30;h+=1)o[h]=5;w.fnInflateConstruct(d,o,30)}inflate(o,s,d,h){const t=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],e=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],n=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],a=s+d,l=new Uint8Array(h);let c=s,u=0,_=0,m=0,p,g,y;const b=function(C){let I=m;for(;_<C;){if(c===a)throw new Error("Zip: inflate: Data overflow");I|=o[c]<<_,c+=1,_+=8}return m=I>>C,_-=C,I&(1<<C)-1},M=function(C){let I=0,R=0,A=0;for(let q=1;q<=15;q+=1){I|=b(1);const V=C.count[q];if(I<R+V)return C.symbol[A+(I-R)];A+=V,R+=V,R<<=1,I<<=1}return null},E=function(){if(m=0,_=0,c+4>a)throw new Error(`Zip: inflate: Data overflow at pos ${c}`);let C=w.getUint16(o,c);if(c+=2,o[c]!==(~C&255)||o[c+1]!==(~C>>8&255))throw new Error(`Zip: inflate: Bad length at pos ${c}`);if(c+=2,c+C>a)throw new Error(`Zip: inflate: Data overflow at pos ${c}`);for(;C;)l[u]=o[c],u+=1,c+=1,C-=1},P=function(){const C=b(5)+257,I=b(5)+1,R=b(4)+4;if(C>286||I>30)throw new Error("Zip: inflate: length/distance code overflow");let A;for(A=0;A<R;A+=1)y[r[A]]=b(3);for(;A<19;A+=1)y[r[A]]=0;if(w.fnInflateConstruct(g,y,19)!==0)throw new Error("Zip: inflate: length codes incomplete");for(A=0;A<C+I;){let G=M(g);if(G<16)y[A]=G,A+=1;else{let Ot=0;if(G===16){if(A===0)throw new Error("Zip: inflate: repeat lengths with no first length");Ot=y[A-1],G=3+b(2)}else G===17?G=3+b(3):G=11+b(7);if(A+G>C+I)throw new Error("Zip: inflate: more lengths than specified");for(;G;)y[A]=Ot,G-=1,A+=1}}const q=w.fnInflateConstruct(g,y,C),V=w.fnInflateConstruct(p,y.slice(C),I);if(q<0||q>0&&C-g.count[0]!==1||V<0||V>0&&I-p.count[0]!==1)throw new Error("Zip: inflate: bad literal or length codes")},v=function(){let C;do if(C=M(g),C<256&&(l[u]=C,u+=1),C>256){if(C-=257,C>28)throw new Error("Zip: inflate: Invalid length/distance");let I=t[C]+b(e[C]);C=M(p);const R=i[C]+b(n[C]);if(R>u)throw new Error("Zip: inflate: distance out of range");for(;I;)l[u]=l[u-R],I-=1,u+=1}while(C!==256)};let k;do{k=b(1);const C=b(2);switch(C){case 0:E();break;case 1:case 2:g={count:[],symbol:[]},p={count:[],symbol:[]},y=[],C===1?w.fnConstructFixedHuffman(y,g,p):P(),v();break;default:throw new Error(`Zip: inflate: unsupported compression type ${C}`)}}while(!k);return l}readBinaryData(o,s){const d=this.data,h=this.entryTable[o];if(!h)throw new Error(`Zip: readBinaryData: File does not exist: ${o}`);const t=h.flag&1;console.log(`Zip: Extracting ${o}: compressedSize=${h.compressedSize} size=${h.size} compressionMethod=${h.compressionMethod} encrypted=${t}`);let e=d.subarray(h.dataStart,h.dataStart+h.compressedSize);if(t){if(!s)throw new Error("Zip: Password required");e=w.zipCryptoDecrypt(e,h,s)}if(h.compressionMethod!==0)if(h.compressionMethod===8)e=this.inflate(e,0,h.compressedSize,h.size);else throw new Error(`Zip: readBinaryData: compression method not supported ${h.compressionMethod}`);return e}static isProbablyZipFile(o){if(o.length<4)return!1;const s=W.lfhSignature,d=0;return(o[d+3]<<24|o[d+2]<<16|o[d+1]<<8|o[d])===s}}const Z={debug:0,file:"",search:""},B={},z=O.map("map"),j=O.markerClusterGroup(),D=O.popup(),H=O.featureGroup(),_t=O.popup(),nt=[];function Ut(f,o){window.setTimeout(f,o)}function yt(f){Object.keys(f).forEach(o=>delete f[o])}function Ft(f,o){let s;return d=>{clearTimeout(s),s=window.setTimeout(()=>f(d),o)}}function T(f,o){const s=window.document.getElementById(f);s.disabled=o}function bt(f,o,s,d){let h;return nt.length>0?(h=nt.pop(),h.setLatLng([f,o]),h.setIcon(s)):h=O.marker([f,o],{icon:s}),h.waypointName=d,h}function vt(f){f.eachLayer(o=>{o instanceof O.Marker&&nt.push(o)}),f.clearLayers()}const Lt={"Geocache|Earthcache":"brown","Geocache|Event Cache":"fireBrick","Geocache|Letterbox Hybrid":"yellow","Geocache|Multi-cache":"orange","Geocache|Traditional Cache":"green","Geocache|Unknown Cache":"CornFlowerBlue","Geocache|Webcam Cache":"DarkTurquoise","Waypoint|Parking Area":"gray","Waypoint|Physical Stage":"gray","Waypoint|Reference Point":"gray","Waypoint|Trailhead":"gray","Waypoint|Virtual Stage":"lightblue",Location:"transparent",Solver:"transparent",Default:"gray"},ot={};function it(f){const o=Lt[f]||Lt.Default;if(!ot[o]){const s=f==="Location"?22:18;ot[f]=O.divIcon({className:"custom-cache-icon",html:`<svg width="${s}" height="${s}" stroke="black" stroke-width="1">
            <circle cx="${s/2}" cy="${s/2}" r="${s/2-1}" fill="${o}" />
            <line x1="${s*.27}" y1="${s*.27}" x2="${s*.73}" y2="${s*.73}" />
            <line x1="${s*.73}" y1="${s*.27}" x2="${s*.27}" y2="${s*.73}" />
            </svg>`,iconSize:[s,s],iconAnchor:[s/2,s/2],popupAnchor:[0,-s/2]})}return ot[f]}function wt(f,o){z.hasLayer(j)&&(vt(j),z.removeLayer(j)),f.length>0&&(f.forEach(s=>{const d=bt(s.lat,s.lon,it(s.type),s.name);j.addLayer(d)}),j.addTo(z),o||z.fitBounds(j.getBounds().pad(.5)))}const Q=O.featureGroup();function Gt(f){const o=Q.getLayers();if(o.length)o[0].setLatLngs(f);else{const s={color:"blue",weight:2,opacity:.7};new O.Polyline(f,s).addTo(Q)}}function Zt(f){Q.clearLayers();const o=[];for(let s=0;s<f.length;s+=1){const d=f[s],h=new O.LatLng(d.lat,d.lon);o.push(h)}Gt(o)}const rt={};function Rt(f){z.hasLayer(H)&&(vt(H),z.removeLayer(H)),yt(rt),f.length>0&&(f.forEach(o=>{const s=bt(o.lat,o.lon,it(o.type),o.name);H.addLayer(s),rt[o.name]=o}),H.addTo(z))}function Y(f){const o=f.trim().toLowerCase(),s=document.getElementById("keepViewInput"),d=Object.values(B),h=document.getElementById("waypointCount");if(!o){wt(d,s.checked),h.innerText=String(d.length);return}const t=d.filter(e=>e.name.toLowerCase().includes(o)||e.desc.toLowerCase().includes(o)||e.cacheInfo.toLowerCase().includes(o));wt(t,s.checked),h.innerText=`${t.length} / ${d.length}`}function Ct(f,o,s){const d=f.lastIndexOf(o);if(d<0)return f;const h=o.length,t=s?1:h;return[f.substring(0,d).trim(),f.substring(d+t).trim()].join(`<br>
`)}function X(f,o){const s=Math.abs(f),d=Math.abs(o),h=f>=0?"N":"S",t=o>=0?"E":"W",e=Math.floor(s),i=(s-e)*60,n=Math.floor(d),r=(d-n)*60;return h+" "+String(e).padStart(2,"0")+"° "+i.toFixed(3).padStart(6,"0")+" "+t+" "+String(n).padStart(3,"0")+"° "+r.toFixed(3).padStart(6,"0")}const st=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];function xt(f){return st[Math.round(f/(360/st.length))%st.length]}function Mt(f){return f>1e3?(f/1e3).toFixed(3)+" km":f.toFixed(2)+" m"}function at(f,o){const s=a=>a*Math.PI/180,d=a=>a*180/Math.PI,h=s(f.lat),t=s(o.lat),e=s(o.lng-f.lng),i=Math.sin(e)*Math.cos(t),n=Math.cos(h)*Math.sin(t)-Math.sin(h)*Math.cos(t)*Math.cos(e),r=Math.atan2(i,n);return(d(r)+360)%360}function tt(f,o,s,d){let h="";if(f.cacheInfo)h=`
    <details style="margin-top:4px;">
        <summary>More info</summary>
        <div style="margin-top:4px;">
            <div style="margin:0;max-height:120px;overflow:auto;border:1px solid #ccc;padding:4px;background:#fafafa;">
                ${f.cacheInfo}${o}
            </div>
        </div>
    </details>`;else if(f.type==="Solver"&&U&&O.latLng(f.lat,f.lon).distanceTo(U.getLatLng())<=1){const c=D.getContent();h=`
    <details style="margin-top:4px;">
        <summary>Marker ${U.waypointName}</summary>
        <div style="margin-top:4px;">
            <div style="margin:0;max-height:120px;overflow:auto;border:1px solid #ccc;padding:4px;background:#fafafa;">
                ${c}
            </div>
        </div>
    </details>`}const t=X(f.lat,f.lon),e=Ct(Ct(f.desc," by ",!0),",",!1),i=s>=0?`<br>Distance: ${Mt(s)} ${xt(d)} (${d.toFixed(0)}°)`:"",n=f.name;return`
<strong>${n.startsWith("GC")?`<a href="https://coord.info/${n}" target="_blank">${n}</a>`:n}</strong><br>
<span>${e}</span><br>
<small>${t}${i}</small>
${h}
`}function Wt(f){const o=window.localStorage.getItem(f);if(o){const s=JSON.parse(o);return{name:s.name||"",lat:Number(s.lat)||0,lon:Number(s.lon)||0,type:s.type||"",desc:s.desc||"",cacheInfo:s.cacheInfo||"",solverCode:s.solverCode||"",solverCodeEdited:s.solverCodeEdited}}}function kt(f){const o=B[f];return o?o.solverCodeEdited||o.solverCode:""}function jt(f,o){window.localStorage.setItem(f,JSON.stringify(o))}function Ht(f){window.localStorage.removeItem(f)}function qt(){for(let f=0;f<window.localStorage.length;f++){const o=window.localStorage.key(f);if(o&&o.startsWith("GC")){const s=Wt(o);s&&(B[o]=s)}}}function Vt(f){return f?`<details><summary>Solver</summary><div class="gc_solver">${f.replace(/\n/g,`<br>
`)}<br>
</div></details>
`:""}function $t(f,o,s,d){const h=`<br>
${f.cacheInfo||""}${o}<br>
`,t=X(f.lat,f.lon),e=s>=0?`Distance: ${Mt(s)} ${xt(d)} (${d.toFixed(0)}°)<br>
`:"",i=f.name;return`${i.startsWith("GC")?`<a href="https://coord.info/${i}" target="_blank">${i}</a>`:i}<br>
${t}<br>
${e}${f.desc}<br>
${h}`}function Qt(){return document.getElementById("waypointInfo").innerHTML}function lt(f){const o=document.getElementById("waypointInfo");o.innerHTML=f}function Yt(f,o){f.includes("–")&&console.warn("strange '-' found: '–'.");const s={vars:{},get:d=>{let h=o[d];if(h===void 0&&d.startsWith("$")){const t=d.substring(1),e=B[t];e&&(h=X(e.lat,e.lon))}return h},set:(d,h)=>{o[d]=h}};try{const d=new S().calculate(f,s);return Z.debug>1&&console.debug("DEBUG: parseSolverCode: ",d,o),String(d)}catch(d){const h=String(d);return console.error(h),`<span style="color: red">Error: ${h}</span><br>
`}}function Kt(f){return f.map(s=>{const[d,h]=s,t=new x().parse(String(h));return{name:d,lat:t.getLat(),lon:t.getLng(),type:"Solver",desc:t.getComment(),cacheInfo:"",solverCode:""}})}let U;function ct(f){U=f;const o=B[f.waypointName];T("editButton",!1),T("saveButton",!0),T("cancelButton",!0);const s=F.getLatLng(),h=s.lat===0&&s.lng===0?-1:f.getLatLng().distanceTo(s),t=at(s,f.getLatLng()),e=kt(o.name),i=Vt(e);let n=$t(o,i,h,t);const r=tt(o,i,h,t);if(D.setLatLng(f.getLatLng()).setContent(r),e){const a={},l=Yt(e,a);n+="<br>Solver Result:<br>",l&&(n+=l.replace(/\n/g,`<br>
`));const c=Object.entries(a).filter(([_])=>_.startsWith("$")),u=Kt(c);Rt(u),Zt(u)}lt(n)}function Jt(f){const o=rt[f.waypointName],s=F.getLatLng(),h=s.lat===0&&s.lng===0?-1:f.getLatLng().distanceTo(s),t=at(s,f.getLatLng()),e=tt(o,"",h,t);_t.setLatLng(f.getLatLng()).setContent(e)}function Xt(f){H.clearLayers(),Q.clearLayers();const o=f.propagatedFrom;ct(o)}function te(f){const o=f.propagatedFrom;Jt(o)}function ut(f,o){const s=[],d=new w({data:f});let h="";const t=d.getZipDirectory(),e=Object.keys(t);console.log(`processZipFile: ${o}: with ${e.length} entries`);for(let i=0;i<e.length;i+=1){const n=e[i];if(t[n].isDirectory)console.log(`processZipFile: Ignoring directory: ${n}`);else if(n.startsWith("__MACOSX/"))console.log(`processZipFile: Ignoring file: ${n}`);else{t[n].flag&1&&!h&&(h=prompt(`Password for ${n.split("/").pop()}:`)||"");try{const r=d.readBinaryData(n,h);if(r)if(n.endsWith(".zip")||w.isProbablyZipFile(r)){console.log(`File ${n} is a ZIP file, processing recursively.`);const a=ut(r,n);s.push(...a)}else{const a=w.convertUint8ArrayToUtf8(r),l=St(a,n);s.push(l)}}catch(r){const a=r instanceof Error?r.message:String(r);console.error(`File ${n}:`,a),s.push(`<span style="color: red">File ${n}: ${a}</span><br>
`)}}}return s}function St(f,o){const s=new DOMParser;f.includes("\v")&&(f=f.replaceAll("\v"," "),console.warn(`File ${o}: Special VT character(s) removed.`));const d=s.parseFromString(f,"application/xml"),h=d.querySelector("parsererror");if(h)throw new Error(`Error parsing ${o}: ${h.textContent}`);let t=0;const e=Array.from(d.getElementsByTagName("wpt"));for(const n of e){const r=parseFloat(n.getAttribute("lat")||"0"),a=parseFloat(n.getAttribute("lon")||"0"),l=n.getElementsByTagName("name")[0]?.textContent||"Waypoint",c=n.getElementsByTagName("desc")[0]?.textContent||"",u=n.getElementsByTagName("type")[0]?.textContent||"",_=n.getElementsByTagName("groundspeak:cache")[0];let m="",p="";if(_){const g=(_.getAttribute("archived")||"").toLowerCase()==="true",y=(_.getAttribute("available")||"").toLowerCase()==="true",b=_.getElementsByTagName("groundspeak:name")[0]?.textContent||"",M=_.getElementsByTagName("groundspeak:type")[0]?.textContent||"",E=_.getElementsByTagName("groundspeak:container")[0]?.textContent||"",P=_.getElementsByTagName("groundspeak:long_description")[0]?.textContent||"",v=_.getElementsByTagName("groundspeak:encoded_hints")[0]?.textContent||"";m=`- Cache Name: ${b}<br>
- Type: ${M}<br>
- Container: ${E}<br>
- Archived: ${g}<br>
- Available: ${y}<br>
- Hints: ${v}<br>
- Description:<br>
${P}`;const k=m.match(/<details><summary>Solver<\/summary><div class="gc_solver">(.+?)<\/div><\/details>/s);if(k&&k[1]){p=k[1].replace(/<br\/?>(\n)?/g,`
`).trim();const C=k.index||-1;C>=0&&(m=m.substring(0,C))}}l in B&&(t+=1),B[l]={name:l,lat:r,lon:a,type:u,desc:c,cacheInfo:m,solverCode:p}}const i=t?` (overwritten: ${t})`:"";return`Processed file ${o} with ${e.length} waypoints${i}.`}async function Et(f){let o="";lt(o),T("editButton",!0),T("saveButton",!0),D.isOpen()&&D.close();const s=Date.now(),d=f.dataTransfer,h=d?d.files:f.target.files,t=d?null:f.target;if(!h||h.length===0)return;yt(B),Y(""),t&&(t.style.color="");for(const n of h)try{if(n.type==="application/x-zip-compressed"||n.type==="application/zip"){const r=await n.arrayBuffer(),a=ut(new Uint8Array(r),n.name);o+=a.map(l=>`<span>${l}</span><br>
`).join("")}else{let r=n.name,a=await n.text();if(n.type==="text/javascript"||n.type==="application/x-javascript"){const l=/GPXmap\.addItem\("([^"]+)", `\s*([^`]*)`\)/.exec(a);if(l)r=l[1],a=l[2],At(r,a);else throw new Error("onFileInputChange: GPXmap.addItem not found in JS file "+r)}else if(r.endsWith(".b64")&&(a=atob(a),r=r.slice(0,-4)),r.endsWith(".zip")){const l=new Uint8Array(a.split("").map(u=>u.charCodeAt(0))),c=ut(l,n.name);o+=c.map(u=>`<span>${u}</span><br>
`).join("")}else{const l=St(a,n.name);o+=`<span>${l}</span><br>
`}}}catch(r){const a=r instanceof Error?r.message:String(r);console.error(a),o+=`<span style="color: red">${a}</span><br>
`,t&&(t.style.color="red")}lt(Qt()+o);const e=document.getElementById("waypointSearch");Y(e.value);const i=Date.now();console.log(`Processed in ${i-s} ms`)}function ee(){if(!U){console.error("No marker selected.");return}const f=U.waypointName,o=kt(f),s=document.getElementById("waypointInfo");s.innerText=o||"",s.setAttribute("contenteditable","true"),T("editButton",!0),T("saveButton",!1),T("cancelButton",!1)}function ne(){if(!U){console.error("No marker selected.");return}const f=document.getElementById("waypointInfo");f.setAttribute("contenteditable","false");const o=f.innerText.trim(),s=U.waypointName,d=B[s];d&&(o?(d.solverCodeEdited=o,jt(s,d)):(delete d.solverCodeEdited,Ht(s))),ct(U),T("editButton",!1),T("cancelButton",!0)}function oe(){if(!U){console.error("No marker selected.");return}document.getElementById("waypointInfo").setAttribute("contenteditable","false"),ct(U),T("editButton",!1),T("cancelButton",!0)}function ie(f){f.stopPropagation(),f.preventDefault(),f.dataTransfer!==null&&(f.dataTransfer.dropEffect="copy")}function It(f){return f._source}function re(f){const o=f.coords.latitude,s=f.coords.longitude,d=F.getLatLng(),h=d.lat===0&&d.lng===0,t=X(o,s);if(F.setLatLng([o,s]),F.getPopup()?.setContent(`You are here!<br>${t}`),h){if(!document.getElementById("keepViewInput").checked){const i=z.getZoom()>12?z.getZoom():12;z.setView([o,s],i)}F.addTo(z)}if(D.isOpen()){const e=It(D),i=B[e.waypointName],n=F.getLatLng(),r=e.getLatLng().distanceTo(n),a=at(n,e.getLatLng()),l=tt(i,"",r,a);D.setContent(l)}}function se(f){switch(f.code){case f.PERMISSION_DENIED:console.error("User denied the request for Geolocation.");break;case f.POSITION_UNAVAILABLE:console.error("Location information is unavailable.");break;case f.TIMEOUT:console.error("The request to get user location timed out.");break;default:console.error("An unknown error occurred.");break}}let ft;const F=O.marker([0,0],{icon:it("Location")}),ae=O.popup();function le(f){if(!("geolocation"in navigator)){console.warn("Geolocation is not supported by this browser.");return}if(f.target.checked)ft=navigator.geolocation.watchPosition(s=>re(s),se,{enableHighAccuracy:!0});else if(navigator.geolocation.clearWatch(ft),ft=0,F.remove(),F.setLatLng([0,0]),D.isOpen()){const s=It(D),d=B[s.waypointName],h=tt(d,"",-1,-1);D.setContent(h)}}function At(f,o){o=o.replace(/^\n/,"").replace(/\n$/,""),f||(console.warn("addItem: no key!"),f="unknown");const s=document.getElementById("fileInput"),d=f.endsWith(".zip")?"application/zip":"text/plain",h=new File([o],f,{type:d,lastModified:Date.now()}),t=new DataTransfer;t.items.add(h),s.files=t.files,s.dispatchEvent(new Event("change"))}async function ce(f){return new Promise((o,s)=>{const d=function(h){const t=h.type,e=h.currentTarget,i=e.getAttribute("data-key");e.removeEventListener("load",d,!1),e.removeEventListener("error",d,!1),t==="load"?o(i):s(new Error(`Loading failed for ${i}`))};f.addEventListener("load",d,!1),f.addEventListener("error",d,!1),document.getElementsByTagName("head")[0].appendChild(f)})}async function ue(f,o){const s=document.createElement("script");return s.type="text/javascript",s.async=!0,s.src=f,s.setAttribute("data-key",o),ce(s)}function Pt(f){let o="";try{o=decodeURIComponent(f.replace(/\+/g," "))}catch(s){s instanceof Error&&(s.message+=": "+f),console.error(s)}return o}function fe(f){const o=window.location.search.substring(1),s=/([^&=]+)=?([^&]*)/g,d=[];let h;for(;(h=s.exec(o))!==null;){const t=Pt(h[1]),e=Pt(h[2]);e!==null&&f[t]!==void 0&&d.push(t+"="+e)}return d}function he(f,o){for(const s of f){const[d,...h]=s.split("="),t=typeof o[d];let e=h.join("=");e!==void 0&&(t==="boolean"?e=e==="true":t==="number"&&(e=Number(e)),o[d]=e)}return o}function de(){const f=document.getElementById("waypointInfo"),o={error:"red",warn:"orange",log:"gray",debug:"blue"};["error","warn","log","debug"].forEach(s=>{const d=console[s];console[s]=(...h)=>{d(...h),f.innerHTML+=`<span style="color:${o[s]}">${h.join(" ")}</span><br>`}}),console.log("console messages will be redirected.")}function pe(){const f=fe(Z);he(f,Z),Z.debug>=10&&de(),z.setView([0,0],2),O.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap"}).addTo(z),j.on("click",Xt),j.bindPopup(D),H.on("click",te),H.bindPopup(_t);const o=document.getElementById("fileInput");o.addEventListener("change",r=>void Et(r));const s=document.getElementById("map");s.addEventListener("dragover",ie,!1),s.addEventListener("drop",r=>{r.stopPropagation(),r.preventDefault(),Et(r),o.style.color="lightgrey"},!1);const d=document.getElementById("waypointSearch");d.addEventListener("input",Ft(r=>{const a=r.target.value;Y(a)},400)),Z.search&&(d.value=Z.search),document.getElementById("waypointSearchClear").addEventListener("click",()=>{d.value="",Y(d.value)}),document.getElementById("showLocationInput").addEventListener("change",le),F.bindPopup(ae),window.GPXmap={addItem:(r,a)=>{At(r,a)}},document.getElementById("editButton").addEventListener("click",ee),document.getElementById("saveButton").addEventListener("click",ne),document.getElementById("cancelButton").addEventListener("click",oe),Q.addTo(z),Ut(()=>{if(Z.file){const r=Z.file,a=Z.file;ue(r,a).catch(l=>{console.error(l)})}else{qt();const r=document.getElementById("waypointSearch");Y(r.value)}},10)}pe()})(L);
//# sourceMappingURL=index.js.map
