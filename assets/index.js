(function(P){"use strict";var ht=document.createElement("style");ht.textContent=`.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:#ffffff80}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:#fffc;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:#fffc;text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}.leaflet-cluster-anim .leaflet-marker-icon,.leaflet-cluster-anim .leaflet-marker-shadow{-webkit-transition:-webkit-transform .3s ease-out,opacity .3s ease-in;-moz-transition:-moz-transform .3s ease-out,opacity .3s ease-in;-o-transition:-o-transform .3s ease-out,opacity .3s ease-in;transition:transform .3s ease-out,opacity .3s ease-in}.leaflet-cluster-spider-leg{-webkit-transition:-webkit-stroke-dashoffset .3s ease-out,-webkit-stroke-opacity .3s ease-in;-moz-transition:-moz-stroke-dashoffset .3s ease-out,-moz-stroke-opacity .3s ease-in;-o-transition:-o-stroke-dashoffset .3s ease-out,-o-stroke-opacity .3s ease-in;transition:stroke-dashoffset .3s ease-out,stroke-opacity .3s ease-in}.marker-cluster-small{background-color:#b5e28c99}.marker-cluster-small div{background-color:#6ecc3999}.marker-cluster-medium{background-color:#f1d35799}.marker-cluster-medium div{background-color:#f0c20c99}.marker-cluster-large{background-color:#fd9c7399}.marker-cluster-large div{background-color:#f1801799}.leaflet-oldie .marker-cluster-small{background-color:#b5e28c}.leaflet-oldie .marker-cluster-small div{background-color:#6ecc39}.leaflet-oldie .marker-cluster-medium{background-color:#f1d357}.leaflet-oldie .marker-cluster-medium div{background-color:#f0c20c}.leaflet-oldie .marker-cluster-large{background-color:#fd9c73}.leaflet-oldie .marker-cluster-large div{background-color:#f18017}.marker-cluster{background-clip:padding-box;border-radius:20px}.marker-cluster div{width:30px;height:30px;margin-left:5px;margin-top:5px;text-align:center;border-radius:15px;font:12px Helvetica Neue,Arial,Helvetica,sans-serif}.marker-cluster span{line-height:30px}body{font-family:system-ui,sans-serif;margin:1em;padding:0;background:#f8f9fa;min-width:320px;line-height:1.5}#app{max-width:800px;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000012;padding:1.5em}#map{width:100%;height:500px;border-radius:6px;box-shadow:0 1px 4px #00000014;margin-top:1em;resize:vertical}#waypointInfo{margin:1em 0 0;width:100%;height:200px;overflow:auto;border:1px solid #ccc;border-radius:6px;background:#fafafa;resize:vertical}.smallFont{font-size:80%}.checkbox-group label{display:inline-flex;align-items:center;gap:.3em}@media only screen and (max-width:700px){body{margin:0}#app{padding:1em}}
/*$vite$:1*/`,document.head.appendChild(ht);var $={exports:{}},Pt=$.exports,dt;function zt(){return dt||(dt=1,(function(d,o){(function(s,f){f(o)})(Pt,function(s){var f=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i=this._featureGroup,n=this._nonPointGroup,r=this.options.chunkedLoading,a=this.options.chunkInterval,c=this.options.chunkProgress,l=t.length,u=0,m=!0,_;if(this._map){var p=new Date().getTime(),g=L.bind(function(){var b=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();u<l;u++){if(r&&u%200===0){var M=new Date().getTime()-b;if(M>a)break}if(_=t[u],_ instanceof L.LayerGroup){m&&(t=t.slice(),m=!1),this._extractNonGroupLayers(_,t),l=t.length;continue}if(!_.getLatLng){n.addLayer(_),e||this.fire("layeradd",{layer:_});continue}if(!this.hasLayer(_)&&(this._addLayer(_,this._maxZoom),e||this.fire("layeradd",{layer:_}),_.__parent&&_.__parent.getChildCount()===2)){var S=_.__parent.getAllChildMarkers(),O=S[0]===_?S[1]:S[0];i.removeLayer(O)}}c&&c(u,l,new Date().getTime()-p),u===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(g,this.options.chunkDelay)},this);g()}else for(var y=this._needsClustering;u<l;u++){if(_=t[u],_ instanceof L.LayerGroup){m&&(t=t.slice(),m=!1),this._extractNonGroupLayers(_,t),l=t.length;continue}if(!_.getLatLng){n.addLayer(_);continue}this.hasLayer(_)||y.push(_)}return this},removeLayers:function(t){var e,i,n=t.length,r=this._featureGroup,a=this._nonPointGroup,c=!0;if(!this._map){for(e=0;e<n;e++){if(i=t[e],i instanceof L.LayerGroup){c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),n=t.length;continue}this._arraySplice(this._needsClustering,i),a.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i})}return this}if(this._unspiderfy){this._unspiderfy();var l=t.slice(),u=n;for(e=0;e<u;e++){if(i=l[e],i instanceof L.LayerGroup){this._extractNonGroupLayers(i,l),u=l.length;continue}this._unspiderfyLayer(i)}}for(e=0;e<n;e++){if(i=t[e],i instanceof L.LayerGroup){c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),n=t.length;continue}if(!i.__parent){a.removeLayer(i),this.fire("layerremove",{layer:i});continue}this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),r.hasLayer(i)&&(r.removeLayer(i),i.clusterShow&&i.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i=this._needsClustering.slice(),n=this._needsRemoving,r,a,c;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),a=i.length-1;a>=0;a--){for(r=!0,c=n.length-1;c>=0;c--)if(n[c].layer===i[a]){r=!1;break}r&&t.call(e,i[a])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(i){L.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(i=this._needsRemoving,e=i.length-1;e>=0;e--)if(i[e].layer===t)return!1;return!!(t.__parent&&t.__parent._group===this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=this._map;typeof e!="function"&&(e=function(){});var n=function(){(i.hasLayer(t)||i.hasLayer(t.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",n,this),this.off("animationend",n,this),i.hasLayer(t)?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var e,i,n;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],n.newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());e>=r&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var n=this._gridClusters,r=this._gridUnclustered,a=this._featureGroup,c=this._map,l=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var u=t.__parent,m=u._markers,_;for(this._arraySplice(m,t);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<l));)e&&u._childCount<=1?(_=u._markers[0]===t?u._markers[1]:u._markers[0],n[u._zoom].removeObject(u,c.project(u._cLatLng,u._zoom)),r[u._zoom].addObject(_,c.project(_.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(_),_.__parent=u.__parent,u._icon&&(a.removeLayer(u),i||a.addLayer(_))):u._iconNeedsUpdate=!0,u=u.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return e<10?i+="small":e<100?i+="medium":i+="large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,r=this.options.spiderfyOnEveryZoom;(e||n||r)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=t.layer,i=e;if(!(t.type==="clusterkeypress"&&t.originalEvent&&t.originalEvent.keyCode!==13)){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),this.options.spiderfyOnEveryZoom&&e.spiderfy(),t.originalEvent&&t.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this.options.spiderfyOnEveryZoom,r=this._map;(t||i||n)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),r.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;typeof i!="function"&&(n=function(){return i}),this.options.disableClusteringAtZoom!==null&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var r=t;r>=e;r--)this._gridClusters[r]=new L.DistanceGrid(n(r)),this._gridUnclustered[r]=new L.DistanceGrid(n(r));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i=this._gridClusters,n=this._gridUnclustered,r=Math.floor(this._map.getMinZoom()),a,c;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=r;e--){a=this._map.project(t.getLatLng(),e);var l=i[e].getNearObject(a);if(l){l._addChild(t),t.__parent=l;return}if(l=n[e].getNearObject(a),l){var u=l.__parent;u&&this._removeLayer(l,!1);var m=new this._markerCluster(this,e,l,t);i[e].addObject(m,this._map.project(m._cLatLng,e)),l.__parent=m,t.__parent=m;var _=m;for(c=e-1;c>u._zoom;c--)_=new this._markerCluster(this,c,_),i[c].addObject(_,this._map.project(l.getLatLng(),c));u._addChild(_),this._removeFromGridUnclustered(l,e);return}n[e].addObject(t,a)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(t){var e=this._maxLat;return e!==void 0&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(e._childCount===2){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i=t.getLayers(),n=0,r;for(e=e||[];n<i.length;n++){if(r=i[n],r instanceof L.LayerGroup){this._extractNonGroupLayers(r,e);continue}e.push(r)}return e},_overrideMarkerIcon:function(t){var e=t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}});return e}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i=this._getExpandedVisibleBounds(),n=this._featureGroup,r=Math.floor(this._map.getMinZoom()),a;this._ignoreMove=!0,this._topClusterLevel._recursively(i,t,r,function(c){var l=c._latlng,u=c._markers,m;for(i.contains(l)||(l=null),c._isSingleParent()&&t+1===e?(n.removeLayer(c),c._recursivelyAddChildrenToMap(null,e,i)):(c.clusterHide(),c._recursivelyAddChildrenToMap(l,e,i)),a=u.length-1;a>=0;a--)m=u[a],i.contains(m._latlng)||n.removeLayer(m)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,e),n.eachLayer(function(c){!(c instanceof L.MarkerCluster)&&c._icon&&c.clusterShow()}),this._topClusterLevel._recursively(i,t,e,function(c){c._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,t,r,function(c){n.removeLayer(c),c.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds(),r=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(n,r,e+1,i);var a=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue(function(){if(t._childCount===1){var c=t._markers[0];this._ignoreMove=!0,c.setLatLng(c.getLatLng()),this._ignoreMove=!1,c.clusterShow&&c.clusterShow()}else t._recursively(n,i,r,function(l){l._recursivelyRemoveChildrenFromMap(n,r,e+1)});a._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var h=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(t,e);for(var n=this._markers.length-1;n>=0;n--)e&&this._markers[n].__dragStart||t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e=this._childClusters.slice(),i=this._group._map,n=i.getBoundsZoom(this._bounds),r=this._zoom+1,a=i.getZoom(),c;e.length>0&&n>r;){r++;var l=[];for(c=0;c<e.length;c++)l=l.concat(e[c]._childClusters);e=l}n>r?this._group._map.setView(this._latlng,r):n<=a?this._group._map.setView(this._latlng,a+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t=this._markers,e=this._childClusters,i=0,n=0,r=this._childCount,a,c,l,u;if(r!==0){for(this._resetBounds(),a=0;a<t.length;a++)l=t[a]._latlng,this._bounds.extend(l),i+=l.lat,n+=l.lng;for(a=0;a<e.length;a++)c=e[a],c._boundsNeedUpdate&&c._recalculateBounds(),this._bounds.extend(c._bounds),l=c._wLatLng,u=c._childCount,i+=l.lat*u,n+=l.lng*u;this._latlng=this._wLatLng=new L.LatLng(i/r,n/r),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,function(n){var r=n._markers,a,c;for(a=r.length-1;a>=0;a--)c=r[a],c._icon&&(c._setPos(e),c.clusterHide())},function(n){var r=n._childClusters,a,c;for(a=r.length-1;a>=0;a--)c=r[a],c._icon&&(c._setPos(e),c.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,n){this._recursively(t,n,e,function(r){r._recursivelyAnimateChildrenIn(t,r._group._map.latLngToLayerPoint(r.getLatLng()).round(),i),r._isSingleParent()&&i-1===n?(r.clusterShow(),r._recursivelyRemoveChildrenFromMap(t,e,i)):r.clusterHide(),r._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,function(n){if(e!==n._zoom)for(var r=n._markers.length-1;r>=0;r--){var a=n._markers[r];i.contains(a._latlng)&&(t&&(a._backupLatlng=a.getLatLng(),a.setLatLng(t),a.clusterHide&&a.clusterHide()),n._group._featureGroup.addLayer(a))}},function(n){n._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var r,a;this._recursively(t,e-1,i-1,function(c){for(a=c._markers.length-1;a>=0;a--)r=c._markers[a],(!n||!n.contains(r._latlng))&&(c._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())},function(c){for(a=c._childClusters.length-1;a>=0;a--)r=c._childClusters[a],(!n||!n.contains(r._latlng))&&(c._group._featureGroup.removeLayer(r),r.clusterShow&&r.clusterShow())})},_recursively:function(t,e,i,n,r){var a=this._childClusters,c=this._zoom,l,u;if(e<=c&&(n&&n(this),r&&c===i&&r(this)),c<e||c<i)for(l=a.length-1;l>=0;l--)u=a[l],u._boundsNeedUpdate&&u._recalculateBounds(),t.intersects(u._bounds)&&u._recursively(t,e,i,n,r)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),r=this._grid,a=r[n]=r[n]||{},c=a[i]=a[i]||[],l=L.Util.stamp(t);this._objectPoint[l]=e,c.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),r=this._grid,a=r[n]=r[n]||{},c=a[i]=a[i]||[],l,u;for(delete this._objectPoint[L.Util.stamp(t)],l=0,u=c.length;l<u;l++)if(c[l]===t)return c.splice(l,1),u===1&&delete a[i],!0},eachObject:function(t,e){var i,n,r,a,c,l,u,m=this._grid;for(i in m){c=m[i];for(n in c)for(l=c[n],r=0,a=l.length;r<a;r++)u=t.call(e,l[r]),u&&(r--,a--)}},getNearObject:function(t){var e=this._getCoord(t.x),i=this._getCoord(t.y),n,r,a,c,l,u,m,_,p=this._objectPoint,g=this._sqCellSize,y=null;for(n=i-1;n<=i+1;n++)if(c=this._grid[n],c){for(r=e-1;r<=e+1;r++)if(l=c[r],l)for(a=0,u=l.length;a<u;a++)m=l[a],_=this._sqDist(p[L.Util.stamp(m)],t),(_<g||_<=g&&y===null)&&(g=_,y=m)}return y},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},(function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat,n=e[0].lng-e[1].lng;return n*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i=0,n=null,r=[],a,c,l;for(a=e.length-1;a>=0;a--){if(c=e[a],l=this.getDistant(c,t),l>0)r.push(c);else continue;l>i&&(i=l,n=c)}return{maxPoint:n,newPoints:r}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints)),i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints)),i):[t[0]]},getConvexHull:function(t){var e=!1,i=!1,n=!1,r=!1,a=null,c=null,l=null,u=null,m=null,_=null,p;for(p=t.length-1;p>=0;p--){var g=t[p];(e===!1||g.lat>e)&&(a=g,e=g.lat),(i===!1||g.lat<i)&&(c=g,i=g.lat),(n===!1||g.lng>n)&&(l=g,n=g.lng),(r===!1||g.lng<r)&&(u=g,r=g.lng)}i!==e?(_=c,m=a):(_=u,m=l);var y=[].concat(this.buildConvexHull([_,m],t),this.buildConvexHull([m,_],t));return y}}})(),L.MarkerCluster.include({getConvexHull:function(){var t=this.getAllChildMarkers(),e=[],i,n;for(n=t.length-1;n>=0;n--)i=t[n].getLatLng(),e.push(i);return L.QuickHull.getConvexHull(e)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var t=this.getAllChildMarkers(null,!0),e=this._group,i=e._map,n=i.latLngToLayerPoint(this._latlng),r;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?r=this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?r=this._generatePointsSpiral(t.length,n):(n.y+=10,r=this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,r)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),n=i/this._2PI,r=this._2PI/t,a=[],c,l;for(n=Math.max(n,35),a.length=t,c=0;c<t;c++)l=this._circleStartAngle+c*r,a[c]=new L.Point(e.x+n*Math.cos(l),e.y+n*Math.sin(l))._round();return a},_generatePointsSpiral:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier,n=i*this._spiralLengthStart,r=i*this._spiralFootSeparation,a=i*this._spiralLengthFactor*this._2PI,c=0,l=[],u;for(l.length=t,u=t;u>=0;u--)u<t&&(l[u]=new L.Point(e.x+n*Math.cos(c),e.y+n*Math.sin(c))._round()),c+=r/n+u*5e-4,n+=a/c;return l},_noanimationUnspiderfy:function(){var t=this._group,e=t._map,i=t._featureGroup,n=this.getAllChildMarkers(null,!0),r,a;for(t._ignoreMove=!0,this.setOpacity(1),a=n.length-1;a>=0;a--)r=n[a],i.removeLayer(r),r._preSpiderfyLatlng&&(r.setLatLng(r._preSpiderfyLatlng),delete r._preSpiderfyLatlng),r.setZIndexOffset&&r.setZIndexOffset(0),r._spiderLeg&&(e.removeLayer(r._spiderLeg),delete r._spiderLeg);t.fire("unspiderfied",{cluster:this,markers:n}),t._ignoreMove=!1,t._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i=this._group,n=i._map,r=i._featureGroup,a=this._group.options.spiderLegPolylineOptions,c,l,u,m;for(i._ignoreMove=!0,c=0;c<t.length;c++)m=n.layerPointToLatLng(e[c]),l=t[c],u=new L.Polyline([this._latlng,m],a),n.addLayer(u),l._spiderLeg=u,l._preSpiderfyLatlng=l._latlng,l.setLatLng(m),l.setZIndexOffset&&l.setZIndexOffset(1e6),r.addLayer(l);this.setOpacity(.3),i._ignoreMove=!1,i.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i=this,n=this._group,r=n._map,a=n._featureGroup,c=this._latlng,l=r.latLngToLayerPoint(c),u=L.Path.SVG,m=L.extend({},this._group.options.spiderLegPolylineOptions),_=m.opacity,p,g,y,b,M,S;for(_===void 0&&(_=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),u?(m.opacity=0,m.className=(m.className||"")+" leaflet-cluster-spider-leg"):m.opacity=_,n._ignoreMove=!0,p=0;p<t.length;p++)g=t[p],S=r.layerPointToLatLng(e[p]),y=new L.Polyline([c,S],m),r.addLayer(y),g._spiderLeg=y,u&&(b=y._path,M=b.getTotalLength()+.1,b.style.strokeDasharray=M,b.style.strokeDashoffset=M),g.setZIndexOffset&&g.setZIndexOffset(1e6),g.clusterHide&&g.clusterHide(),a.addLayer(g),g._setPos&&g._setPos(l);for(n._forceLayout(),n._animationStart(),p=t.length-1;p>=0;p--)S=r.layerPointToLatLng(e[p]),g=t[p],g._preSpiderfyLatlng=g._latlng,g.setLatLng(S),g.clusterShow&&g.clusterShow(),u&&(y=g._spiderLeg,b=y._path,b.style.strokeDashoffset=0,y.setStyle({opacity:_}));this.setOpacity(.3),n._ignoreMove=!1,setTimeout(function(){n._animationEnd(),n.fire("spiderfied",{cluster:i,markers:t})},200)},_animationUnspiderfy:function(t){var e=this,i=this._group,n=i._map,r=i._featureGroup,a=t?n._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):n.latLngToLayerPoint(this._latlng),c=this.getAllChildMarkers(null,!0),l=L.Path.SVG,u,m,_,p,g,y;for(i._ignoreMove=!0,i._animationStart(),this.setOpacity(1),m=c.length-1;m>=0;m--)u=c[m],u._preSpiderfyLatlng&&(u.closePopup(),u.setLatLng(u._preSpiderfyLatlng),delete u._preSpiderfyLatlng,y=!0,u._setPos&&(u._setPos(a),y=!1),u.clusterHide&&(u.clusterHide(),y=!1),y&&r.removeLayer(u),l&&(_=u._spiderLeg,p=_._path,g=p.getTotalLength()+.1,p.style.strokeDashoffset=g,_.setStyle({opacity:0})));i._ignoreMove=!1,setTimeout(function(){var b=0;for(m=c.length-1;m>=0;m--)u=c[m],u._spiderLeg&&b++;for(m=c.length-1;m>=0;m--)u=c[m],u._spiderLeg&&(u.clusterShow&&u.clusterShow(),u.setZIndexOffset&&u.setZIndexOffset(0),b>1&&r.removeLayer(u),n.removeLayer(u._spiderLeg),delete u._spiderLeg);i._animationEnd(),i.fire("unspiderfied",{cluster:e,markers:c})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=f,s.MarkerCluster=h,Object.defineProperty(s,"__esModule",{value:!0})})})($,$.exports)),$.exports}zt();const T={strNumFormat(d,o,s=" "){let f=String(d);for(let h=f.length;h<o;h+=1)f=s+f;return f},strZeroFormat(d,o){return T.strNumFormat(d,o,"0")}};class x{lat;lng;format;comment;error;constructor(o,s){this.lat=0,this.lng=0,o!==void 0&&s!==void 0&&this.init(o,s)}init(o,s){this.setLatLng(o,s)}static toRadians(o){return o*Math.PI/180}static toDegrees(o){return o*180/Math.PI}clone(){const o=new x;return Object.assign(o,this),o}getLat(){return this.lat}getLng(){return this.lng}setLatLng(o,s){return this.lat=Number(o),this.lng=Number(s),this}getComment(){return this.comment??""}setComment(o){return this.comment=o,this}getFormat(){return this.format}setFormat(o){return this.format=o,this}getError(){return this.error}setError(o){return this.error=o,this}toString(){return Object.values(this).join(",")}distanceTo(o){const f=x.toRadians(this.lat),h=x.toRadians(this.lng),t=x.toRadians(o.lat),e=x.toRadians(o.lng),i=t-f,n=e-h,r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(f)*Math.cos(t)*Math.sin(n/2)*Math.sin(n/2);return 6371e3*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}bearingTo(o){const s=x.toRadians(this.lat),f=x.toRadians(o.lat),h=x.toRadians(o.lng-this.lng),t=Math.sin(h)*Math.cos(f),e=Math.cos(s)*Math.sin(f)-Math.sin(s)*Math.cos(f)*Math.cos(h),i=Math.atan2(t,e);return(x.toDegrees(i)+360)%360}destinationPoint(o,s){const h=Number(o)/6371e3,t=x.toRadians(Number(s)),e=x.toRadians(this.lat),i=x.toRadians(this.lng),n=Math.sin(e),r=Math.cos(e),a=Math.sin(h),c=Math.cos(h),l=Math.sin(t),u=Math.cos(t),m=n*c+r*a*u,_=Math.asin(m),p=l*a*r,g=c-n*m,y=i+Math.atan2(p,g);return new x(x.toDegrees(_),(x.toDegrees(y)+540)%360-180)}intersection(o,s,f,h){const t=x.toRadians(o.lat),e=x.toRadians(o.lng),i=x.toRadians(f.lat),n=x.toRadians(f.lng),r=x.toRadians(Number(s)),a=x.toRadians(Number(h)),c=i-t,l=n-e,u=2*Math.asin(Math.sqrt(Math.sin(c/2)*Math.sin(c/2)+Math.cos(t)*Math.cos(i)*Math.sin(l/2)*Math.sin(l/2)));if(u===0)return new x(0,0).setError("intersection distance=0");const m=(Math.sin(i)-Math.sin(t)*Math.cos(u))/(Math.sin(u)*Math.cos(t)),_=(Math.sin(t)-Math.sin(i)*Math.cos(u))/(Math.sin(u)*Math.cos(i)),p=Math.acos(Math.min(Math.max(m,-1),1)),g=Math.acos(Math.min(Math.max(_,-1),1)),y=Math.sin(n-e)>0?p:2*Math.PI-p,b=Math.sin(n-e)>0?2*Math.PI-g:g,M=(r-y+Math.PI)%(2*Math.PI)-Math.PI,S=(b-a+Math.PI)%(2*Math.PI)-Math.PI;if(Math.sin(M)===0&&Math.sin(S)===0)return new x(0,0).setError("infinite intersections");if(Math.sin(M)*Math.sin(S)<0)return new x(0,0).setError("ambiguous intersection");const O=Math.acos(-Math.cos(M)*Math.cos(S)+Math.sin(M)*Math.sin(S)*Math.cos(u)),v=Math.atan2(Math.sin(u)*Math.sin(M)*Math.sin(S),Math.cos(S)+Math.cos(M)*Math.cos(O)),A=Math.asin(Math.sin(t)*Math.cos(v)+Math.cos(t)*Math.sin(v)*Math.cos(r)),C=Math.atan2(Math.sin(r)*Math.sin(v)*Math.cos(t),Math.cos(v)-Math.sin(t)*Math.sin(A)),E=e+C;return new x(x.toDegrees(A),(x.toDegrees(E)+540)%360-180)}parse(o){let s=0,f=0,h="";function t(){const a=o.match(/^\s*(N|S)\s*(\d+)\s*[ ]\s*(\d+\.\d+)\s*(E|W)\s*(\d+)\s*[ ]\s*(\d+\.\d+)/);return a&&a.length===7?(s=parseInt(a[2],10)+parseFloat(a[3])/60,f=parseInt(a[5],10)+parseFloat(a[6])/60,a[1]==="S"&&(s=-s),a[4]==="W"&&(f=-f),h="dmm",!0):!1}function e(){const a=o.match(/^\s*(N|S)\s*(\d+)\s*[ ]\s*(\d+)\s*'\s*(\d+\.?\d*)\s*"\s*(E|W)\s*(\d+)\s*[ ]\s*(\d+)\s*'\s*(\d+\.?\d*)\s*"/);return a&&a.length===9?(s=parseInt(a[2],10)+parseFloat(a[3])/60+parseFloat(a[4])/3600,f=parseInt(a[6],10)+parseFloat(a[7])/60+parseFloat(a[8])/3600,a[1]==="S"&&(s=-s),a[5]==="W"&&(f=-f),h="dms",!0):!1}function i(){const a=o.match(/^\s*(N|S)\s*(\d+\.\d+)\s*[ ]\s*(E|W)\s*(\d+\.\d+)\s*?/);return a&&a.length===5?(s=parseFloat(a[2]),f=parseFloat(a[4]),a[1]==="S"&&(s=-s),a[3]==="W"&&(f=-f),h="dd",!0):!1}const n=o.indexOf("!");n>=0?(this.comment=o.substr(n+1),o=o.substr(0,n)):this.comment!==void 0&&delete this.comment;const r=t()||e()||i();return this.lat=s,this.lng=f,h&&(this.format=h+(this.comment?"c":"")),delete this.error,!r&&o!==""&&(this.error="Cannot parse "+o,console.warn("parse2position: Cannot parse '"+o+"'")),this}toFixed(o){return this.lat=Number(Number(this.lat).toFixed(o)),this.lng=Number(Number(this.lng).toFixed(o)),this}toFormattedString(o){let s,f;function h(i){const n=Math.abs(i.lat),r=Math.abs(i.lng),a=i.lat>=0?"N":"S",c=i.lng>=0?"E":"W",l=Math.floor(n),u=(n-l)*60,m=Math.floor(r),_=(r-m)*60;return a+" "+T.strZeroFormat(l,2)+" "+T.strZeroFormat(u.toFixed(3),6)+" "+c+" "+T.strZeroFormat(m,3)+" "+T.strZeroFormat(_.toFixed(3),6)}function t(i){const n=Math.abs(i.lat),r=Math.abs(i.lng),a=i.lat>=0?"N":"S",c=i.lng>=0?"E":"W",l=Math.floor(n),u=Math.floor((n-l)*60),m=Math.round((n-l-u/60)*1e3*3600)/1e3,_=Math.floor(r),p=Math.floor((r-_)*60),g=Math.floor((r-_-p/60)*1e3*3600)/1e3;return a+" "+T.strZeroFormat(l,2)+" "+T.strZeroFormat(u,2)+"' "+T.strZeroFormat(m.toFixed(2),5)+'" '+c+" "+T.strZeroFormat(_,3)+" "+T.strZeroFormat(p,2)+"' "+T.strZeroFormat(g.toFixed(2),5)+'"'}function e(i){let n=i.lat,r=i.lng;const a=n>=0?"N":"S",c=r>=0?"E":"W";return a==="S"&&(n=-n),c==="W"&&(r=-r),a+" "+T.strZeroFormat(n.toFixed(5),8)+" "+c+" "+T.strZeroFormat(r.toFixed(5),9)+""}switch(o=o||this.format||"dmm",o.charAt(o.length-1)==="c"&&(o=o.substr(0,o.length-1),f=this.getComment()),o){case"dmm":s=h(this);break;case"dms":s=t(this);break;case"dd":s=e(this);break;default:s="",console.warn("position2string: Unknown format: "+o)}return f&&(s+="!"+f),s}}const pt="_concat abs acos asin atan bearing cb center cls cos count cp ct d2r deg distance encode format goto ic instr int lc len mid mod pc project r2d rad replace reverse rot13 show skeleton sin sqrt sval tan uc val".split(" "),gt="endif if stop then".split(" "),mt=[...pt,...gt].reduce((d,o)=>(d[o]=!0,d),{}),Y=d=>d*Math.PI/180,K=d=>d*180/Math.PI,et=(d,o)=>{d=String(d);for(let s=d.length;s<o;s+=1)d="0"+d;return d},Tt=(d,o)=>{if(o.indexOf(".")<0)d=Number(d).toFixed(0),d=et(d,o.length);else{const s=o.split(".",2);d=Number(d).toFixed(s[1].length),d=et(d,o.length)}return d},Bt=d=>d.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");class k{options;constructor(o){this.options=o||{}}static ErrorObject=class extends Error{value;pos;constructor(o,s,f){super(`${o}: ${s} (pos: ${f})`),this.value=s,this.pos=f,this.name="ScriptParserError"}};lex(o){const s=v=>/[#]/.test(v),f=v=>/[+\-*/^%=<>()[\],;]/.test(v),h=v=>/[0-9]/.test(v),t=v=>/\s/.test(v),e=v=>/["]/.test(v),i=v=>v!==""&&!e(v),n=v=>/[']/.test(v),r=v=>v!==""&&!n(v),a=v=>v!==""&&/[$\w]/.test(v),c=v=>/[:]/.test(v),l=v=>v!==""&&/[0#.]/.test(v),u=v=>v!==""&&v!==`
`,m=[];let _,p,g,y=0;const b=()=>(y+=1,o.charAt(y)),M=v=>{let A="";do A+=p,p=b();while(v(p));return A},S=v=>{let A="";do p==="\\"&&(p=b(),p==="n"&&(p=`
`)),A+=p,p=b();while(v(p));return A},O=(v,A,C)=>{m.push({type:v,value:A,pos:C})};for(;y<o.length;)if(g=y,p=o.charAt(y),t(p))p=b();else if(s(p))M(u);else if(f(p)){let v=p;const A=o.charAt(y+1);((p==="<"||p===">")&&A==="="||p==="<"&&A===">")&&(v+=A,b()),O(v,0,g),p=b()}else if(h(p)){_=M(h),p==="."&&(_+=M(h));const v=parseFloat(_);if(!isFinite(v))throw new k.ErrorObject("Number is too large or too small",_,g);O("number",_,g)}else if(e(p)){if(p="",_=S(i),O("string",_,g+1),!e(p))throw new k.ErrorObject("Unterminated string",_,g+1);p=b()}else if(n(p)){if(p="",_=M(r),O("string",_,g+1),!n(p))throw new k.ErrorObject("Unterminated string",_,g+1);p=b()}else if(a(p))_=M(a),mt[_.toLowerCase()]?O(_.toLowerCase(),0,g):O("identifier",_,g);else if(c(p)){if(p="",_=M(l),O("formatter",_,g),!c(p))throw new k.ErrorObject("Unterminated formatter",_,g+1);p=b()}else throw new k.ErrorObject("Unrecognized token",p,g);return O("(end)",0,y),m}parse(o){const s={};let f=0;const h=[],t=p=>p,e=(p,g,y,b)=>{let M=s[p];M||(s[p]={},M=s[p]),g&&(M.nud=g),y&&(M.lbp=y),b&&(M.led=b)},i=p=>{if(!p)throw new k.ErrorObject("No token","",0);return p},n=()=>i(o[f]),r=()=>(f+=1,n()),a=p=>{let g=n(),y=s[g.type];if(r(),!y.nud)throw g.type==="(end)"?new k.ErrorObject("Unexpected end of file","",g.pos):new k.ErrorObject("Unexpected token (nud)",g.type,g.pos);let b=y.nud(g);for(g=n(),y=s[g.type];p<(y.lbp||0);){if(g=n(),r(),!y.led)throw new k.ErrorObject("Unexpected token",g.type,o[f].pos);b=y.led(b),g=n(),y=s[g.type]}return b},c=(p,g,y,b)=>{y=y||g,e(p,void 0,g,b||function(M){return{type:p,left:M,right:a(y)}})},l=(p,g)=>{e(p,()=>({type:p,right:a(g)}))};e(","),e(")"),e("]"),e("(end)"),e(";"),e("number",t),e("string",t),e("identifier",p=>p);function u(p){if(n().type==="("){const g=f,y=[];if(o[f+1].type===")")r();else{do r(),y.push(a(2));while(n().type===",");if(n().type!==")")throw new k.ErrorObject("Expected closing parenthesis for function",String(o[g-1].type),o[g].pos)}return r(),{type:p.type,args:y,name:"",value:"",pos:o[g-1].pos}}return p}function m(){for(const p of pt)e(p,u);for(const p of gt)e(p,u)}m(),e("(",()=>{const p=f,g=a(2);if(n().type!==")")throw new k.ErrorObject("Expected closing parenthesis",")",o[p].pos);return r(),g}),e("[",function(){let p=n(),g;if(p.type==="(end)")throw new k.ErrorObject("Unexpected end of file","",p.pos);if(o[f+1].type==="]")g=a(2);else{const y=f,b=[];do b.push(a(2)),p=n();while(p.type!=="]"&&p.type!=="(end)");if(p.type!=="]")throw new k.ErrorObject("Expected closing bracket","]",o[y].pos);g={type:"_concat",args:b,name:"",value:"",pos:o[y-1].pos}}return r(),g});let _=!1;for(e("if",()=>{_=!0;const p=a(0);if(_=!1,n().type!=="then")throw new k.ErrorObject("Expected THEN","",n().pos);r();const g=[];for(;n().type!=="endif"&&n().type!=="(end)";)g.push(a(0)),n().type===";"&&r();if(n().type!=="endif")throw new k.ErrorObject("Expected ENDIF","",n().pos);return r(),{type:"if",left:p,args:g,pos:p.pos,value:""}}),e("formatter",void 0,3,p=>{const g=o[f-1];return{type:"formatter",value:g.value,left:p,pos:g.pos}}),l("-",8),c("^",7,6),c("*",5),c("/",5),c("%",5),c("+",4),c("-",4),c("<",4),c(">",4),c("<=",4),c(">=",4),c("<>",4),c("=",3,2,p=>{let g;return p.type==="identifier"&&!_?g={type:"assign",name:p.value,value:"",right:a(0),pos:p.pos}:g={type:"=",left:p,right:a(2),value:"",pos:p.pos},g});n().type!=="(end)";)h.push(a(0));return h}evaluate(o,s,f){const h=this,t={"+":(l,u)=>Number(l)+Number(u),"-":(l,u)=>u===void 0?-l:l-u,"*":(l,u)=>l*u,"/":(l,u)=>l/u,"%":(l,u)=>l%u,"^":(l,u)=>Math.pow(l,u),"=":(l,u)=>String(l)===String(u),"<>":(l,u)=>String(l)!==String(u),"<":(l,u)=>String(l)<String(u),">":(l,u)=>String(l)>String(u),"<=":(l,u)=>String(l)<=String(u),">=":(l,u)=>String(l)>=String(u)},e=f,i=[],n=(l,u,m)=>{const _=e[l];if(_.length!==u.length){const p=e[`${l}_optionalArgs`]?.();if(p){if(p===Number.POSITIVE_INFINITY)return;const g=_.length-Number(p);if(u.length>=g&&u.length<=_.length)return}throw new k.ErrorObject("Wrong number of arguments for function",l,m)}},r=l=>h.options.ignoreFuncCase?l.toLowerCase():l,a=l=>h.options.ignoreVarCase?l.toLowerCase():l,c=l=>{let u,m;if(l.type==="string")u=l.value;else if(l.type==="number")u=parseFloat(l.value);else if(t[l.type])l.left?u=t[l.type](c(l.left),c(l.right)):u=t[l.type](c(l.right));else if(l.type==="identifier")m=a(l.value),u=s.get(m),u===void 0&&(console.log(`Variable is undefined: ${l.value} (pos ${l.pos})`),u="");else if(l.type==="assign"){if(u=c(l.right),m=a(l.name),u===null)throw new k.ErrorObject("value is null",m,l.pos);s.set(m,u),String(parseFloat(String(u)))!==String(u)&&(u='"'+u+'"'),u=l.name+"="+u}else if(l.type==="if")if(c(l.left)){const p=[];for(const g of l.args){const y=c(g);y===null?g.type==="cls"?(i.length=0,p.length=0):g.type:y!==""&&p.push(String(y))}u=p.join(`
`)}else u="";else if(l.type==="stop")u=null;else if(mt[l.type]){const _=[];for(let p=0;p<l.args.length;p+=1)_[p]=c(l.args[p]);if(m=r(l.type),e[m]===void 0)throw new k.ErrorObject("Function is undefined",m,l.pos);n(m,_,l.pos),u=e[m].apply(l,_)}else l.type==="formatter"?(u=c(l.left),u=Tt(String(u),l.value)):(console.error("parseNode node=%o unknown type="+l.type,l),u=String(l));return u};for(let l=0;l<o.length;l+=1){const u=o[l],m=c(u);m===null?u.type==="cls"?i.length=0:u.type==="stop"&&(l=o.length):m!==""&&i.push(String(m))}return i.join(`
`)}calculate(o,s){const f=this,h={_concat_optionalArgs:()=>Number.POSITIVE_INFINITY,_concat:(...n)=>n.join(""),abs:Math.abs,acos:n=>K(Math.acos(n)),asin:n=>K(Math.asin(n)),atan:n=>K(Math.atan(n)),bearing:function(n,r){const a=new x().parse(n),c=new x().parse(r);return a.bearingTo(c)},cb:function(n,r,a,c){const l=new x().parse(n),u=new x().parse(a),m=x.prototype.intersection(l,r,u,c),_=m.getError();let p=m.toFormattedString();return _&&(p+="!error!"+_),p},center:()=>{console.log("center() ignored.")},cls:()=>null,cos:n=>Math.cos(Y(n)),count:function(n,r){let a="";if(n=String(n),r=String(r),r.length===1)return h.countStr(n,r);const c=r.split("");for(let l=0;l<c.length;l+=1){const u=c[l];a+=" "+u+"="+h.countStr(n,u)}return a.trim()},countStr:function(n,r){return(String(n).match(new RegExp(r,"g"))||[]).length},ct:function(n){const r=String(n).replace(/[^\d]/g,"");let a=0;for(let c=0;c<r.length;c+=1)a+=Number(r.charAt(c));return a},d2r:n=>Y(n),deg:()=>{console.log("deg() ignored.")},distance:function(n,r){const a=new x().parse(n),c=new x().parse(r);return a.distanceTo(c)},encode:function(n,r,a){const c=new RegExp("["+r+"]","g");return n.replace(c,function(l){return a.charAt(r.indexOf(l))})},format:function(n,r){const c=new x().parse(n).toFormattedString(r);if(!c)throw new k.ErrorObject("Unknown format",r,-1);return c},goto:n=>(console.log(`goto ${n}: ignored.`),""),ic_optionalArgs:()=>1,ic:function(n){return typeof n>"u"?!!f.options.ignoreVarCase:(f.options.ignoreVarCase=!!n,"")},instr_optionalArgs:()=>1,instr:function(n,r,a){return String(n).indexOf(r,a?a-1:0)+1},int:Math.trunc,lc:n=>String(n).toLowerCase(),len:n=>String(n).length,mid:function(n,r,a){return String(n).substr(r-1,a)},mod:function(n,r){return n%r},pc:()=>{console.warn("pc ignored.")},project:function(n,r,a){return new x().parse(n).destinationPoint(a,r).toFormattedString()},r2d:n=>K(n),rad:()=>{console.warn("rad ignored.")},replace:function(n,r,a){const c=Bt(r),l=new RegExp(c,"g");return String(n).replace(l,a)},reverse:function(n){return String(n).split("").reverse().join("")},rot13:function(n){return String(n).replace(/[A-Za-z]/g,function(r){return String.fromCharCode(r.charCodeAt(0)+(r.toUpperCase()<="M"?13:-13))})},show:()=>{console.warn("show ignored.")},sin:n=>Math.sin(Y(n)),skeleton:()=>{console.warn("skeleton ignored.")},sqrt:Math.sqrt,sval:function(n){let a="";n=String(n).toLowerCase().replace(/[^a-z]/g,"");for(let c=0;c<n.length;c+=1)a+=(c>0?" ":"")+et(String(n.charCodeAt(c)-96),2);return a},tan:n=>Math.tan(Y(n)),uc:n=>String(n).toUpperCase(),val:function(n){let a=0;n=String(n).toLowerCase();for(let c=0;c<n.length;c+=1){let l=n.charCodeAt(c)-96;(l<0||l>26)&&(l=0),a+=l}return a}},t=this.lex(o),e=this.parse(t);return this.evaluate(e,s,h)}}const R={eocdSignature:101010256,cdfhSignature:33639248,lfhSignature:67324752,eocdLen:22,cdfhLen:46,lfhLen:30};function Nt(d){let s="",f=d.length,h=0;for(;f>0;){const t=Math.min(f,25e3),e=d.subarray(h,h+t);s+=String.fromCharCode.apply(null,e),h+=t,f-=t}return s}class w{options;data;entryTable={};static textDecoder=typeof TextDecoder<"u"?new TextDecoder("utf-8",{fatal:!1}):{decode:Nt};constructor(o){this.options={},this.setOptions(o,!0)}getOptions(){return this.options}setOptions(o,s){const f=this.options.data;Object.assign(this.options,o),(s||this.options.data!==f)&&(this.data=this.options.data,this.entryTable=this.readZipDirectory())}static createCrcTable(){const o=new Uint32Array(256);for(let s=0;s<256;s+=1){let f=s;for(let h=0;h<8;h+=1)f=f&1?3988292384^f>>>1:f>>>1;o[s]=f>>>0}return o}static crcTable=void 0;static zipCryptoCrc32(o,s){const f=w.crcTable||(w.crcTable=w.createCrcTable());return(o>>>8^f[(o^s)&255])>>>0}static zipCryptoUpdateKeys(o,s){o[0]=w.zipCryptoCrc32(o[0],s),o[1]=o[1]+(o[0]&255)>>>0,o[1]=(Math.imul(o[1],134775813)>>>0)+1>>>0,o[2]=w.zipCryptoCrc32(o[2],o[1]>>>24&255)}static zipCryptoInitKeys(o){const s=[305419896,591751049,878082192];for(let f=0;f<o.length;f+=1)w.zipCryptoUpdateKeys(s,o.charCodeAt(f));return s}static zipCryptoDecryptByte(o,s){const f=(o[2]|2)>>>0,h=s^Math.imul(f,f^1)>>>8&255;return w.zipCryptoUpdateKeys(o,h),h}static zipCryptoDecrypt(o,s,f){const h=w.zipCryptoInitKeys(f),t=new Uint8Array(12);for(let n=0;n<12;n+=1){const r=w.zipCryptoDecryptByte(h,o[n]);t[n]=r}let e;if((s.flag&8)!==0?e=s.modificationTime>>8&255:e=s.crc>>24&255,t[11]!==e)throw new Error("Zip: The password did not match.");const i=new Uint8Array(o.length-12);for(let n=12;n<o.length;n+=1){const r=w.zipCryptoDecryptByte(h,o[n]);i[n-12]=r}return i}getZipDirectory(){return this.entryTable}static convertUint8ArrayToUtf8(o){return w.textDecoder.decode(o)}static getUint16(o,s){return o[s+1]<<8|o[s]}static getUint32(o,s){return o[s+3]<<24|o[s+2]<<16|o[s+1]<<8|o[s]}readAsUTF8(o,s){const f=this.data.subarray(o,o+s);return w.convertUint8ArrayToUtf8(f)}readEocd(o){const s=this.data;return{signature:w.getUint32(s,o),entries:w.getUint16(s,o+10),cdfhOffset:w.getUint32(s,o+16),cdSize:w.getUint32(s,o+20)}}readCdfh(o){const s=this.data;return{signature:w.getUint32(s,o),version:w.getUint16(s,o+6),flag:w.getUint16(s,o+8),compressionMethod:w.getUint16(s,o+10),modificationTime:w.getUint16(s,o+12),crc:w.getUint32(s,o+16),compressedSize:w.getUint32(s,o+20),size:w.getUint32(s,o+24),fileNameLength:w.getUint16(s,o+28),extraFieldLength:w.getUint16(s,o+30),fileCommentLength:w.getUint16(s,o+32),localOffset:w.getUint32(s,o+42),name:"",isDirectory:!1,extra:[],comment:"",timestamp:0,dataStart:0}}readZipDirectory(){const s=this.data,f={};let h=s.length-R.eocdLen+1,t;const e=Math.max(0,h-65535);for(;h>=e&&(h-=1,!(w.getUint32(s,h)===R.eocdSignature&&(t=this.readEocd(h),w.getUint32(s,t.cdfhOffset)===R.cdfhSignature))););if(!t)throw new Error(`Zip: File ended abruptly: EOCD not found at pos ${h>=0?h:0}`);const i=t.entries;let n=t.cdfhOffset;for(h=0;h<i;h+=1){const r=this.readCdfh(n);if(r.signature!==R.cdfhSignature)throw new Error(`Zip: Bad CDFH signatureat pos ${n}`);if(!r.fileNameLength)throw new Error(`Zip Entry name missing at pos ${n}`);if(n+=R.cdfhLen,r.name=this.readAsUTF8(n,r.fileNameLength),n+=r.fileNameLength,r.isDirectory=r.name.charAt(r.name.length-1)==="/",r.extra=this.data.subarray(n,n+r.extraFieldLength),n+=r.extraFieldLength,r.comment=this.readAsUTF8(n,r.fileCommentLength),n+=r.fileCommentLength,(r.flag&64)===64)throw new Error("Zip: Strong encryption not suppoered.");if((r.flag&8192)===8192)throw new Error("Zip: Strong directory encryption not suppoered.");const a=r.modificationTime;r.timestamp=new Date((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1).getTime(),w.getUint32(s,r.localOffset)!==R.lfhSignature&&console.error("Zip: readZipDirectory: LFH signature not found at offset",r.localOffset);const c=w.getUint16(s,r.localOffset+28);r.dataStart=r.localOffset+R.lfhLen+r.name.length+c,f[r.name]=r}return f}static fnInflateConstruct(o,s,f){let h;for(h=0;h<=15;h+=1)o.count[h]=0;for(h=0;h<f;h+=1)o.count[s[h]]+=1;if(o.count[0]===f)return 0;let t=1;for(h=1;h<=15;h+=1)if((t=(t<<1)-o.count[h])<0)return t;const e=[void 0,0];for(h=1;h<15;h+=1)e[h+1]=e[h]+o.count[h];for(h=0;h<f;h+=1)s[h]!==0&&(o.symbol[e[s[h]]]=h,e[s[h]]+=1);return t}static fnConstructFixedHuffman(o,s,f){let h;for(h=0;h<144;h+=1)o[h]=8;for(;h<256;h+=1)o[h]=9;for(;h<280;h+=1)o[h]=7;for(;h<288;h+=1)o[h]=8;for(w.fnInflateConstruct(s,o,288),h=0;h<30;h+=1)o[h]=5;w.fnInflateConstruct(f,o,30)}inflate(o,s,f,h){const t=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],e=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],n=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],a=s+f,c=new Uint8Array(h);let l=s,u=0,m=0,_=0,p,g,y;const b=function(C){let E=_;for(;m<C;){if(l===a)throw new Error("Zip: inflate: Data overflow");E|=o[l]<<m,l+=1,m+=8}return _=E>>C,m-=C,E&(1<<C)-1},M=function(C){let E=0,Z=0,I=0;for(let q=1;q<=15;q+=1){E|=b(1);const V=C.count[q];if(E<Z+V)return C.symbol[I+(E-Z)];I+=V,Z+=V,Z<<=1,E<<=1}return null},S=function(){if(_=0,m=0,l+4>a)throw new Error(`Zip: inflate: Data overflow at pos ${l}`);let C=w.getUint16(o,l);if(l+=2,o[l]!==(~C&255)||o[l+1]!==(~C>>8&255))throw new Error(`Zip: inflate: Bad length at pos ${l}`);if(l+=2,l+C>a)throw new Error(`Zip: inflate: Data overflow at pos ${l}`);for(;C;)c[u]=o[l],u+=1,l+=1,C-=1},O=function(){const C=b(5)+257,E=b(5)+1,Z=b(4)+4;if(C>286||E>30)throw new Error("Zip: inflate: length/distance code overflow");let I;for(I=0;I<Z;I+=1)y[r[I]]=b(3);for(;I<19;I+=1)y[r[I]]=0;if(w.fnInflateConstruct(g,y,19)!==0)throw new Error("Zip: inflate: length codes incomplete");for(I=0;I<C+E;){let F=M(g);if(F<16)y[I]=F,I+=1;else{let Ot=0;if(F===16){if(I===0)throw new Error("Zip: inflate: repeat lengths with no first length");Ot=y[I-1],F=3+b(2)}else F===17?F=3+b(3):F=11+b(7);if(I+F>C+E)throw new Error("Zip: inflate: more lengths than specified");for(;F;)y[I]=Ot,F-=1,I+=1}}const q=w.fnInflateConstruct(g,y,C),V=w.fnInflateConstruct(p,y.slice(C),E);if(q<0||q>0&&C-g.count[0]!==1||V<0||V>0&&E-p.count[0]!==1)throw new Error("Zip: inflate: bad literal or length codes")},v=function(){let C;do if(C=M(g),C<256&&(c[u]=C,u+=1),C>256){if(C-=257,C>28)throw new Error("Zip: inflate: Invalid length/distance");let E=t[C]+b(e[C]);C=M(p);const Z=i[C]+b(n[C]);if(Z>u)throw new Error("Zip: inflate: distance out of range");for(;E;)c[u]=c[u-Z],E-=1,u+=1}while(C!==256)};let A;do{A=b(1);const C=b(2);switch(C){case 0:S();break;case 1:case 2:g={count:[],symbol:[]},p={count:[],symbol:[]},y=[],C===1?w.fnConstructFixedHuffman(y,g,p):O(),v();break;default:throw new Error(`Zip: inflate: unsupported compression type ${C}`)}}while(!A);return c}readBinaryData(o,s){const f=this.data,h=this.entryTable[o];if(!h)throw new Error(`Zip: readBinaryData: File does not exist: ${o}`);const t=h.flag&1;console.log(`Zip: Extracting ${o}: compressedSize=${h.compressedSize} size=${h.size} compressionMethod=${h.compressionMethod} encrypted=${t}`);let e=f.subarray(h.dataStart,h.dataStart+h.compressedSize);if(t){if(!s)throw new Error("Zip: Password required");e=w.zipCryptoDecrypt(e,h,s)}if(h.compressionMethod!==0)if(h.compressionMethod===8)e=this.inflate(e,0,h.compressedSize,h.size);else throw new Error(`Zip: readBinaryData: compression method not supported ${h.compressionMethod}`);return e}static isProbablyZipFile(o){if(o.length<4)return!1;const s=R.lfhSignature,f=0;return(o[f+3]<<24|o[f+2]<<16|o[f+1]<<8|o[f])===s}}const N={debug:0,file:"",search:""},G={},z=P.map("map"),W=P.markerClusterGroup(),D=P.popup(),j=P.featureGroup(),_t=P.popup(),nt=[];function Dt(d,o){return(async()=>window.setTimeout(d,o))()}function yt(d){Object.keys(d).forEach(o=>delete d[o])}function Ut(d,o){let s;return(...f)=>{clearTimeout(s),s=window.setTimeout(()=>d(...f),o)}}function B(d,o){const s=window.document.getElementById(d);s.disabled=o}function bt(d,o,s,f){let h;return nt.length>0?(h=nt.pop(),h.setLatLng([d,o]),h.setIcon(s)):h=P.marker([d,o],{icon:s}),h.waypointName=f,h}function vt(d){d.eachLayer(o=>{o instanceof P.Marker&&nt.push(o)}),d.clearLayers()}const Lt={"Geocache|Earthcache":"brown","Geocache|Event Cache":"fireBrick","Geocache|Letterbox Hybrid":"yellow","Geocache|Multi-cache":"orange","Geocache|Traditional Cache":"green","Geocache|Unknown Cache":"CornFlowerBlue","Geocache|Webcam Cache":"DarkTurquoise","Waypoint|Parking Area":"gray","Waypoint|Physical Stage":"gray","Waypoint|Reference Point":"gray","Waypoint|Trailhead":"gray","Waypoint|Virtual Stage":"lightblue",Location:"transparent",Solver:"transparent",Default:"gray"},ot={};function it(d){const o=Lt[d]||Lt.Default;if(!ot[o]){const s=d==="Location"?22:18;ot[d]=P.divIcon({className:"custom-cache-icon",html:`<svg width="${s}" height="${s}" stroke="black" stroke-width="1">
            <circle cx="${s/2}" cy="${s/2}" r="${s/2-1}" fill="${o}" />
            <line x1="${s*.27}" y1="${s*.27}" x2="${s*.73}" y2="${s*.73}" />
            <line x1="${s*.73}" y1="${s*.27}" x2="${s*.27}" y2="${s*.73}" />
            </svg>`,iconSize:[s,s],iconAnchor:[s/2,s/2],popupAnchor:[0,-s/2]})}return ot[d]}function wt(d,o){z.hasLayer(W)&&(vt(W),z.removeLayer(W)),d.length>0&&(d.forEach(s=>{const f=bt(s.lat,s.lon,it(s.type),s.name);W.addLayer(f)}),W.addTo(z),o||z.fitBounds(W.getBounds().pad(.5)))}const Q=P.featureGroup();function Ft(d){const o=Q.getLayers();if(o.length)o[0].setLatLngs(d);else{const s={color:"blue",weight:2,opacity:.7};new P.Polyline(d,s).addTo(Q)}}function Gt(d){Q.clearLayers();const o=[];for(let s=0;s<d.length;s+=1){const f=d[s],h=new P.LatLng(f.lat,f.lon);o.push(h)}Ft(o)}const rt={};function Zt(d){z.hasLayer(j)&&(vt(j),z.removeLayer(j)),yt(rt),d.length>0&&(d.forEach(o=>{const s=bt(o.lat,o.lon,it(o.type),o.name);j.addLayer(s),rt[o.name]=o}),j.addTo(z))}function J(d){const o=d.trim().toLowerCase(),s=document.getElementById("keepViewInput"),f=Object.values(G),h=document.getElementById("waypointCount");if(!o){wt(f,s.checked),h.innerText=String(f.length);return}const t=f.filter(e=>e.name.toLowerCase().includes(o)||e.desc.toLowerCase().includes(o)||e.cacheInfo.toLowerCase().includes(o));wt(t,s.checked),h.innerText=`${t.length} / ${f.length}`}function Ct(d,o,s){const f=d.lastIndexOf(o);if(f<0)return d;const h=o.length,t=s?1:h;return[d.substring(0,f).trim(),d.substring(f+t).trim()].join(`<br>
`)}function X(d,o){const s=Math.abs(d),f=Math.abs(o),h=d>=0?"N":"S",t=o>=0?"E":"W",e=Math.floor(s),i=(s-e)*60,n=Math.floor(f),r=(f-n)*60;return h+" "+String(e).padStart(2,"0")+" "+i.toFixed(3).padStart(6,"0")+" "+t+" "+String(n).padStart(3,"0")+" "+r.toFixed(3).padStart(6,"0")}const st=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];function xt(d){return st[Math.round(d/(360/st.length))%st.length]}function Mt(d){return d>1e3?(d/1e3).toFixed(3)+" km":d.toFixed(2)+" m"}function at(d,o){const s=a=>a*Math.PI/180,f=a=>a*180/Math.PI,h=s(d.lat),t=s(o.lat),e=s(o.lng-d.lng),i=Math.sin(e)*Math.cos(t),n=Math.cos(h)*Math.sin(t)-Math.sin(h)*Math.cos(t)*Math.cos(e),r=Math.atan2(i,n);return(f(r)+360)%360}function tt(d,o,s){const f=d.cacheInfo?`
<details style="margin-top:4px;">
    <summary>More info</summary>
    <div style="margin-top:4px;">
        <div style="margin:0;max-height:120px;overflow:auto;border:1px solid #ccc;padding:4px;background:#fafafa;">
            ${d.cacheInfo}
        </div>
    </div>
</details>`:"",h=X(d.lat,d.lon),t=Ct(Ct(d.desc," by ",!0),",",!1),e=o>=0?`<br>Distance: ${Mt(o)} ${xt(s)} (${s.toFixed(0)})`:"",i=d.name;return`
<strong>${i.startsWith("GC")?`<a href="https://coord.info/${i}" target="_blank">${i}</a>`:i}</strong><br>
<span>${t}</span><br>
<small>${h}${e}</small><br>
${f}
`}function kt(d){const o=d.match(/<details><summary>Solver<\/summary><div class="gc_solver">(.+?)<\/div><\/details>/s);let s="",f=-1;return o&&o[1]&&(s=o[1].replace(/<br\/?>\n/g,`
`).trim(),f=o.index||-1),{solverCode:s,index:f}}function St(d){return window.localStorage.getItem(d)}function Et(d){let o=St(d);if(!o){const s=G[d],{solverCode:f}=kt(s.cacheInfo);o=f}return o}function Rt(d,o){window.localStorage.setItem(d,o)}function Wt(d){window.localStorage.removeItem(d)}function jt(d){return d=d.replace(/\n/g,`<br>
`),`<details><summary>Solver</summary><div class="gc_solver">${d}<br>
</div></details>
`}function Ht(d,o,s){let f=d.cacheInfo||"";const h=St(d.name);if(h){const{solverCode:a,index:c}=kt(f);c>=0&&(f=f.substring(0,c)),f+=jt(h),N.debug>3&&console.debug("DEBUG: oldSolverCode=",a)}f=`<br>
${f}<br>
`;const t=X(d.lat,d.lon),e=o>=0?`Distance: ${Mt(o)} ${xt(s)} (${s.toFixed(0)})<br>
`:"",i=d.name;return`${i.startsWith("GC")?`<a href="https://coord.info/${i}" target="_blank">${i}</a>`:i}<br>
${t}<br>
${e}${d.desc}<br>
${f}`}function qt(){return document.getElementById("waypointInfo").innerHTML}function lt(d){const o=document.getElementById("waypointInfo");o.innerHTML=d}function Vt(d,o){d.includes("")&&console.warn("strange '-' found: ''. Replacing.");const s={vars:{},get:f=>{let h=o[f];if(h===void 0&&f.startsWith("$")){const t=f.substring(1),e=G[t];e&&(h=X(e.lat,e.lon))}return h},set:(f,h)=>{o[f]=h}};try{const f=new k().calculate(d,s);return N.debug>1&&console.debug("DEBUG: parseSolverCode: ",f,o),String(f)}catch(f){const h=String(f);return console.error(h),`<span style="color: red">Error: ${h}</span><br>
`}}function $t(d){return d.map(s=>{const[f,h]=s,t=new x().parse(String(h));return{name:f,lat:t.getLat(),lon:t.getLng(),type:"Solver",desc:"",cacheInfo:""}})}let H;function ct(d){H=d;const o=G[d.waypointName],s=U.getLatLng(),h=s.lat===0&&s.lng===0?-1:d.getLatLng().distanceTo(s),t=at(s,d.getLatLng());let e=Ht(o,h,t);B("editButton",!1),B("saveButton",!0),B("cancelButton",!0);const i=tt(o,h,t);D.setLatLng(d.getLatLng()).setContent(i);const n=Et(d.waypointName);if(n){const r={},a=Vt(n,r);e+="<br>Solver Result:<br>",a&&(e+=a.replace(/\n/g,`<br>
`));const c=Object.entries(r).filter(([u,m])=>u.startsWith("$")),l=$t(c);Zt(l),Gt(l)}lt(e)}function Qt(d){const o=rt[d.waypointName],s=U.getLatLng(),h=s.lat===0&&s.lng===0?-1:d.getLatLng().distanceTo(s),t=at(s,d.getLatLng()),e=tt(o,h,t);_t.setLatLng(d.getLatLng()).setContent(e)}function Yt(d){j.clearLayers(),Q.clearLayers();const o=d.propagatedFrom;ct(o)}function Kt(d){const o=d.propagatedFrom;Qt(o)}function ut(d,o){const s=[],f=new w({data:d});let h="";const t=f.getZipDirectory(),e=Object.keys(t);console.log(`processZipFile: ${o}: with ${e.length} entries`);for(let i=0;i<e.length;i+=1){const n=e[i];if(t[n].isDirectory)console.log(`processZipFile: Ignoring directory: ${n}`);else if(n.startsWith("__MACOSX/"))console.log(`processZipFile: Ignoring file: ${n}`);else{t[n].flag&1&&!h&&(h=prompt(`Password for ${n.split("/").pop()}:`)||"");try{const r=f.readBinaryData(n,h);if(r)if(n.endsWith(".zip")||w.isProbablyZipFile(r)){console.log(`File ${n} is a ZIP file, processing recursively.`);const a=ut(r,n);s.push(...a)}else{const a=w.convertUint8ArrayToUtf8(r),c=It(a,n);s.push(c)}}catch(r){const a=r instanceof Error?r.message:String(r);console.error(`File ${n}:`,a),s.push(`<span style="color: red">File ${n}: ${a}</span><br>
`)}}}return s}function It(d,o){const s=new DOMParser;d.includes("\v")&&(d=d.replaceAll("\v"," "),console.warn(`File ${o}: Special VT character(s) removed.`));const f=s.parseFromString(d,"application/xml"),h=f.querySelector("parsererror");if(h)throw new Error(`Error parsing ${o}: ${h.textContent}`);let t=0;const e=Array.from(f.getElementsByTagName("wpt"));for(const n of e){const r=parseFloat(n.getAttribute("lat")||"0"),a=parseFloat(n.getAttribute("lon")||"0"),c=n.getElementsByTagName("name")[0]?.textContent||"Waypoint",l=n.getElementsByTagName("desc")[0]?.textContent||"",u=n.getElementsByTagName("type")[0]?.textContent||"",m=n.getElementsByTagName("groundspeak:cache")[0];let _="";if(m){const p=(m.getAttribute("archived")||"").toLowerCase()==="true",g=(m.getAttribute("available")||"").toLowerCase()==="true",y=m.getElementsByTagName("groundspeak:name")[0]?.textContent||"",b=m.getElementsByTagName("groundspeak:type")[0]?.textContent||"",M=m.getElementsByTagName("groundspeak:container")[0]?.textContent||"",S=m.getElementsByTagName("groundspeak:long_description")[0]?.textContent||"",O=m.getElementsByTagName("groundspeak:encoded_hints")[0]?.textContent||"";_=`- Cache Name: ${y}<br>
- Type: ${b}<br>
- Container: ${M}<br>
- Archived: ${p}<br>
- Available: ${g}<br>
- Hints: ${O}<br>
- Description:<br>
${S}`}c in G&&(t+=1),G[c]={name:c,lat:r,lon:a,type:u,desc:l,cacheInfo:_}}const i=t?` (overwritten: ${t})`:"";return`Processed file ${o} with ${e.length} waypoints${i}.`}async function Jt(d){let o="";lt(o),B("editButton",!0),B("saveButton",!0),D.isOpen()&&D.close();const s=Date.now(),f=d.target;if(!f.files||f.files.length===0)return;yt(G),J(""),f.style.color="";for(const e of f.files)try{if(e.type==="application/x-zip-compressed"||e.type==="application/zip"){const i=await e.arrayBuffer(),n=ut(new Uint8Array(i),e.name);o+=n.map(r=>`<span>${r}</span><br>
`).join("")}else{let i=e.name,n=await e.text();if(i.endsWith(".b64")&&(n=atob(n),i=i.slice(0,-4)),i.endsWith(".zip")){const r=new Uint8Array(n.split("").map(c=>c.charCodeAt(0))),a=ut(r,e.name);o+=a.map(c=>`<span>${c}</span><br>
`).join("")}else{const r=It(n,e.name);o+=`<span>${r}</span><br>
`}}}catch(i){const n=i instanceof Error?i.message:String(i);console.error(n),o+=`<span style="color: red">${n}</span><br>
`,f.style.color="red"}lt(qt()+o);const h=document.getElementById("waypointSearch");J(h.value);const t=Date.now();console.log(`Processed in ${t-s} ms`)}function Xt(d){if(!H){console.error("No marker selected.");return}const o=H.waypointName,s=Et(o),f=document.getElementById("waypointInfo");f.innerText=s,f.setAttribute("contenteditable","true"),B("editButton",!0),B("saveButton",!1),B("cancelButton",!1)}function te(d){if(!H){console.error("No marker selected.");return}const o=document.getElementById("waypointInfo");o.setAttribute("contenteditable","false");const s=o.innerText.trim(),f=H.waypointName;s?Rt(f,s):Wt(f),ct(H),B("editButton",!1),B("cancelButton",!0)}function ee(d){if(!H){console.error("No marker selected.");return}document.getElementById("waypointInfo").setAttribute("contenteditable","false"),ct(H),B("editButton",!1),B("cancelButton",!0)}function ne(d){const o=d.coords.latitude,s=d.coords.longitude,f=U.getLatLng(),h=f.lat===0&&f.lng===0,t=X(o,s);if(U.setLatLng([o,s]),U.getPopup()?.setContent(`You are here!<br>${t}`),h){if(!document.getElementById("keepViewInput").checked){const i=z.getZoom()>12?z.getZoom():12;z.setView([o,s],i)}U.addTo(z)}if(D.isOpen()){const e=D._source,i=G[e.waypointName],n=U.getLatLng(),r=e.getLatLng().distanceTo(n),a=at(n,e.getLatLng()),c=tt(i,r,a);D.setContent(c)}}function oe(d){switch(d.code){case d.PERMISSION_DENIED:console.error("User denied the request for Geolocation.");break;case d.POSITION_UNAVAILABLE:console.error("Location information is unavailable.");break;case d.TIMEOUT:console.error("The request to get user location timed out.");break;default:console.error("An unknown error occurred.");break}}let ft;const U=P.marker([0,0],{icon:it("Location")}),ie=P.popup();function re(d){if(!("geolocation"in navigator)){console.warn("Geolocation is not supported by this browser.");return}if(d.target.checked)ft=navigator.geolocation.watchPosition(s=>ne(s),oe,{enableHighAccuracy:!0});else if(navigator.geolocation.clearWatch(ft),ft=0,U.remove(),U.setLatLng([0,0]),D.isOpen()){const s=D._source,f=G[s.waypointName],h=tt(f,-1,-1);D.setContent(h)}}function se(d,o){o=o.replace(/^\n/,"").replace(/\n$/,""),d||(console.warn("addItem: no key!"),d="unknown");const s=document.getElementById("fileInput"),f=d.endsWith(".zip")?"application/zip":"text/plain",h=new File([o],d,{type:f,lastModified:Date.now()}),t=new DataTransfer;t.items.add(h),s.files=t.files,s.dispatchEvent(new Event("change"))}async function ae(d){return new Promise((o,s)=>{const f=function(h){const t=h.type,e=h.currentTarget,i=e.getAttribute("data-key");e.removeEventListener("load",f,!1),e.removeEventListener("error",f,!1),t==="load"?o(i):s(`Loading failed for ${i}`)};d.addEventListener("load",f,!1),d.addEventListener("error",f,!1),document.getElementsByTagName("head")[0].appendChild(d)})}async function le(d,o){const s=document.createElement("script");return s.type="text/javascript",s.async=!0,s.src=d,s.setAttribute("data-key",o),ae(s)}function At(d){let o="";try{o=decodeURIComponent(d.replace(/\+/g," "))}catch(s){s instanceof Error&&(s.message+=": "+d),console.error(s)}return o}function ce(d){const o=window.location.search.substring(1),s=/([^&=]+)=?([^&]*)/g,f=[];let h;for(;(h=s.exec(o))!==null;){const t=At(h[1]),e=At(h[2]);e!==null&&d[t]!==void 0&&f.push(t+"="+e)}return f}function ue(d,o){for(const s of d){const[f,...h]=s.split("="),t=typeof o[f];let e=h.join("=");e!==void 0&&(t==="boolean"?e=e==="true":t==="number"&&(e=Number(e)),o[f]=e)}return o}function fe(){const d=document.getElementById("waypointInfo"),o={error:"red",warn:"orange",log:"gray",debug:"blue"};["error","warn","log","debug"].forEach(s=>{const f=console[s];console[s]=(...h)=>{f(...h),d.innerHTML+=`<span style="color:${o[s]}">${h.join(" ")}</span><br>`}}),console.log("console messages will be redirected.")}function he(){const d=ce(N);ue(d,N),N.debug>=10&&fe(),z.setView([0,0],2),P.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(z),W.on("click",Yt),W.bindPopup(D),j.on("click",Kt),j.bindPopup(_t),document.getElementById("fileInput").addEventListener("change",Jt);const s=document.getElementById("waypointSearch");s.addEventListener("input",Ut(n=>{const r=n.target.value;J(r)},400)),N.search&&(s.value=N.search),document.getElementById("waypointSearchClear").addEventListener("click",n=>{s.value="",J(s.value)}),document.getElementById("showLocationInput").addEventListener("change",re),U.bindPopup(ie),window.GPXmap={addItem:(n,r)=>{se(n,r)}},document.getElementById("editButton").addEventListener("click",Xt),document.getElementById("saveButton").addEventListener("click",te),document.getElementById("cancelButton").addEventListener("click",ee),Q.addTo(z),Dt(async()=>{if(N.file){const n=N.file,r=N.file;try{await le(n,r)}catch(a){console.error(a)}}},10)}he()})(L);
//# sourceMappingURL=index.js.map
